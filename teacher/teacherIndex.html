<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" panel="width=device-width, initial-scale=1.0"/>
    <title>四川工商学院毕业设计管理系统</title>
    <link rel="icon" href="../assets/img/bitbug_favicon.ico" type="img/x-ico"/>
    <!-- Bootstrap Styles-->
    <link href="../assets/css/bootstrap.css" rel="stylesheet"/>
    <!-- 字体图标 Styles-->
    <link href="../assets/css/iconfont.css" rel="stylesheet"/>
    <!-- 分页 Styles-->
    <link href="../assets/css/pagination.css" rel="stylesheet"/>
    <!-- 自定义 Styles-->
    <link href="../assets/css/custom-styles.css" rel="stylesheet"/>
    <!-- jQuery Js -->
    <script src="../assets/js/jquery-1.10.2.js"></script>
    <!-- 自定义 Js -->
    <script src="../assets/js/common.js"></script>
    <!-- 自定义函数 Js -->
    <script src="../assets/js/commonFunction.js"></script>
</head>
<body>
<div id="wrapper">
    <!--顶部导航开始-->
    <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
            <!--屏幕缩小时显示菜单按钮-->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">
                <img style="width: 40px;display: inline-block" src="../assets/img/crest.jpg" alt="">
                <strong>四川工商学院</strong>
            </a>
            <span id="sideNav" class="iconfont icon-right-s packUpIcon"></span>
        </div>
        <ul class="nav navbar-top-links navbar-right">
            <li style="color: #fff" id="information">

            </li>
            <!--通知公告开始-->
            <li id="noticeAnnouncement" class="noticeIcon">
                <a href="#">
                    <span class="iconfont icon-lingdang iconColor fontSize14"></span>
                    <span id="unRead" class="messageUnread"></span>
                    <span class="iconfont icon-jiantou iconColor fontSize8"></span>
                </a>
                <div id="content" class="noticeContent" style="width: 400px">
                    <ul class="tab_menu">
                        <li style="width: 190px" class="selected">公告</li>
                        <li style="width: 190px">通知</li>
                    </ul>
                    <div class="horizontal"></div>
                    <div id="type0" class="type">
                        <div id="publicAannouncement"></div>
                    </div>
                    <div id="type1" class="type hide">
                        <div id="publicNotice"></div>
                    </div>
                </div>
            </li>
            <script id="publicAannouncements" type="text/template">
                <ul>
                    <%if(data==""){%>
                    <li class="liStyle liBorderBottom textEllipsis">
                        暂无未读公告
                    </li>
                    <%}else{
                    data.forEach(function(announcements){%>
                    <li class="liStyle liBorderBottom textEllipsis">
                        <%=announcements.notice.title%>
                    </li>
                    <%})}%>
                    <li class="liStyle liBorderBottom textEllipsis  text-center">
                        <a onclick="messageProclamation()" class="management_messageNotice text-center newPage topPage" href="#">
                            <strong>查看更多公告</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
            </script>
            <script id="publicNotices" type="text/template">
                <ul>
                    <%if(data==""){%>
                    <li class="liStyle liBorderBottom textEllipsis">
                        暂无未读通知
                    </li>
                    <%}else{
                    data.forEach(function(notice){%>
                    <li class="liStyle liBorderBottom textEllipsis">
                        <%=notice.title%>
                    </li>
                    <%})}%>
                    <li class="liStyle liBorderBottom textEllipsis  text-center">
                        <a onclick="messageNotice()" class="management_messageNotice text-center newPage topPage" href="#">
                            <strong>查看更多通知</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
            </script>
            <!--通知公告结束-->
            <!--个人信息开始-->
            <li class="noticeIcon">
                <a href="#">
                    <span class="iconfont icon-wode iconColor fontSize14"></span>
                    <span class="iconfont icon-jiantou iconColor fontSize8"></span>
                </a>
                <div class="noticeContent">
                    <ul>
                        <li class="liStyle liBorderBottom" onclick="showRoleInfo()">
                            <a href="#" class="management_personal newPage topPage aStyle">
                                <span class="paddingIco iconfont icon-wode"></span>
                                个人信息维护
                            </a>
                        </li>
                        <li class="liStyle liBorderBottom">
                            <a href="#" class="management_passwordChange newPage topPage aStyle">
                                <span class="paddingIco iconfont icon-xiugaimima01"></span>
                                修改密码
                            </a>
                        </li>
                        <li class="liStyle">
                            <a href="#" class="management_bounced bounced aStyle" data-toggle="modal"
                               data-target="#logOut">
                                <span class="paddingIco iconfont icon-tuichudenglu"></span>
                                退出登录
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <!--个人信息结束-->
        </ul>
    </nav>
    <!--顶部导航结束-->

    <!--侧导航栏开始-->
    <nav class="navbar-default navbar-side">
        <div class="sidebar-collapse">
            <ul class="nav list-unstyled" id="sideBar">
                <li onclick="CheckOutProject()">
                    <a href="#" class="active-menu" id="management_one">
                        <span class="iconfont icon-lunwentimu iconColor fontSize14 naviconpadding"></span>题目管理
                    </a>
                </li>
                <li onclick="viewReply()"><a href="#" id="management_three">
                    <span class="iconfont icon-dabian iconColorWhite fontSize14 naviconpadding"></span>答辩管理
                </a>
                </li>
                <li onclick="studentList()"><a href="#" id="management_student">
                    <span class="iconfont icon-xuesheng iconColorWhite fontSize14 naviconpadding"></span>学生管理
                </a>
                </li>
                <li onclick="PastExcellent()"><a href="#" id="management_good">
                    <span class="iconfont icon-icon-test iconColorWhite fontSize14 naviconpadding"></span>历届优秀浏览
                </a>
                </li>
                <li onclick="newsBrowse()"><a href="#" id="management_news">
                    <span class="iconfont icon-xinwenguanli iconColorWhite fontSize14 naviconpadding"></span>新闻管理
                </a>
                </li>
            </ul>
        </div>

    </nav>
    <!--侧导航栏结束-->

    <!--题目管理开始-->
    <div id="one" class="page-wrapper">
        <div style="margin: 0px" class="page-inner">
            <!--题目管理开始-->
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div style="background-color: #f5f5f5">
                            <ul class="nav nav-tabs" role="tablist">
                                <li onclick="CheckOutProject()" class="active classOne"><a href="#view_Subject"
                                                                                           role="tab"
                                                                                           data-toggle="tab">查看已出题目</a>
                                </li>
                                <li onclick="uploadTitles()" class="classOther"><a href="#upload_Title" role="tab"
                                                                                   data-toggle="tab">上传题目</a></li>
                                <li onclick="Students_Topics()"><a href="#audit_Students_Topics" role="tab"
                                                                   data-toggle="tab">审核学生选题</a></li>
                            </ul>
                        </div>
                        <div class="tab-content">
                            <!--查看已出题目开始-->
                            <div class="tab-pane active panel-body classOne" id="view_Subject">
                            </div>
                            <script id="view_Subjects" type="text/template">
                                <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                    <div style="padding-bottom: 15px;padding-left: 0px" class="col-md-12">
                                        <div style="padding-left: 0px" class="col-md-12">
                                            <div class="col-md-12 col-xs-12">
                                                <div class="col-md-1 col-xs-1 padding0">
                                                    课题题目：
                                                </div>
                                                <div class="col-md-4 col-xs-4">
                                                    <input id="title" type="text" class="form-control">
                                                </div>
                                                <div class="col-md-1 col-xs-1 padding0">
                                                    题目来源：
                                                </div>
                                                <div class="col-md-3 col-xs-3">
                                                    <input id="source" type="text" class="form-control">
                                                </div>
                                                <div class="col-md-1 col-xs-1 padding0">
                                                    选题范围：
                                                </div>
                                                <div class="col-md-2 col-xs-2">
                                                    <select id="rangeType" style="margin:0px 5px" class="form-control">
                                                        <option value="">全部</option>
                                                        <option value="0">本系</option>
                                                        <option value="1">全院</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-12 col-xs-12" style="padding-top: 10px">
                                                <div class="col-md-1 col-xs-1 padding0">
                                                    题目类型：
                                                </div>
                                                <div class="col-md-4 col-xs-4">
                                                    <input id="genre" type="text" class="form-control">
                                                </div>
                                                <div class="col-md-1 col-xs-1 padding0">
                                                    审核状态：
                                                </div>
                                                <div class="col-md-3 col-xs-3">
                                                    <select id="cStatus" style="margin:0px 5px" class="form-control">
                                                        <option value="">全部</option>
                                                        <option value="1">审核通过</option>
                                                        <option value="0">审核不通过</option>
                                                        <option value="3">审核中</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-1 col-xs-1" style="padding-left: 5px">
                                                    <button type="button" class="btn btn-info"
                                                            onclick="conditionQuery()">查询
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-left: 0px" class="col-md-4">
                                        <div class="col-md-10 col-xs-10" style="padding: 0px">
                                            <h4 class="font_bold">已出课题列表</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-2 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        可选人数/容纳人数
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        题目来源
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        题目类型
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        审核状态
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        任务书
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%if(data==""){%>
                                <div class="alert alert-danger textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else{%>
                                <% data.forEach(function(subject){ %>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div title="<%=subject.project.title%>" class="col-md-2 textEllipsis textAlign">
                                        <span class="clickColor cursorPointer" data-toggle="modal"
                                              data-target="#topicDetails"
                                              onclick="queryTopicDetails('<%=subject.project.id%>')">
                                            <%=subject.project.title%>
                                        </span>
                                    </div>
                                    <div class="col-md-2 textEllipsis textAlign">
                                        <%=subject.project.rest%>/<%=subject.project.number%>
                                    </div>
                                    <div title="<%=subject.project.source%>" class="col-md-2 textEllipsis textAlign">
                                        <%=subject.project.source%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%=subject.project.genre%>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign padding0">
                                        <% let msg;
                                        if(subject.cStatus==0) {
                                        msg = "审核不通过";
                                        }
                                        else if(subject.cStatus==1) {
                                        msg = "审核通过";
                                        }
                                        else {
                                        msg = "审核中";
                                        }
                                        %>
                                        <%=msg%>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign padding0">
                                        <% if(typeof(subject.project.taskBook)=="undefined" ||
                                        typeof(subject.project.taskBook.file)=="undefined" ||
                                        subject.project.taskBook.fileId==0)
                                        {%>
                                        未上传
                                        <%} else {%>
                                        <a title="<%=subject.project.taskBook.file.fileName%>"
                                           href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=subject.project.taskBook.fileId %>"><%=subject.project.taskBook.file.fileName%></a>
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textEllipsis textAlign">
                                        <button type="button" onclick="modifyTopic('<%=subject.project.id%>')"
                                                class="btn btn-info btn-xs">
                                            <% if(subject.cStatus==1) {%>
                                            修改任务书
                                            <%}else{%>
                                            修改
                                            <%}%>
                                        </button>
                                        <% if(subject.cStatus==1) {%>
                                        <button type="button" class="btn btn-info btn-xs" disabled>删除
                                        </button>
                                        <%}else{%>
                                        <button type="button" class="btn btn-info btn-xs" data-toggle="modal"
                                                data-target="#topicDelete"
                                                onclick="deleteTopicId('<%=subject.project.id%>')">删除
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <% }) }%>
                            </script>
                            <!--查看已出题目结束-->
                            <!--上传题目开始-->
                            <div class="tab-pane panel-body classOther" id="upload_Title">

                            </div>
                            <script id="upload_Titles" type="text/template">
                                <form id="upload_TitleForm">
                                    <div class="col-md-12 openingReport">
                                        <%
                                        let
                                        title="",id="",First="isFirst",rangeType,genre="艺美设计",source="生产实际（社会实践）题",briefIntro="",number=1,task="",referData="",uploadFile="",uploadTaskBookFile="",cStatus=0;
                                        if(data!="") {
                                        id = data[0].project.id;
                                        cStatus = data[0].cStatus;
                                        First="notFirst";
                                        title = data[0].project.title;
                                        rangeType = data[0].project.range;
                                        genre = data[0].project.genre;
                                        source = data[0].project.source;
                                        briefIntro = data[0].project.briefIntro;
                                        number = data[0].project.number;
                                        if(typeof(data[0].project.taskBook)!="undefined") {
                                        task = data[0].project.taskBook.task;
                                        referData = data[0].project.taskBook.referData;
                                        }
                                        if(data[0].project.fileId!=0&&typeof(data[0].project.file)!="undefined") {
                                        uploadFile = data[0].project.file.fileName;
                                        }
                                        if(typeof(data[0].project.taskBook)!="undefined"&&data[0].project.taskBook.fileId!=0&&typeof(data[0].project.taskBook.file)!="undefined")
                                        {
                                        uploadTaskBookFile = data[0].project.taskBook.file.fileName;
                                        }
                                        }
                                        %>
                                        <%if(cStatus!=1) {%>
                                        <h4 class="font_bold" style="color: #f09b22">题目内容</h4>
                                        <h5 class="font_bold">课题题目</h5>
                                        <input value="<%=title%>" type="text" class="form-control UploadInput"
                                               name="title">
                                        <h5 style="padding-top: 60px" class="font_bold">题目简介</h5>
                                        <textarea style="margin:0px 5px" rows="5" type="text"
                                                  class="form-control UploadInput"
                                                  name="briefIntro"><%=briefIntro%></textarea>
                                        <h5 class="font_bold">添加附件</h5>
                                        <input id="fileChooseTitle" type="file" style="display: none" name="uploadFile">
                                        <div class="row">
                                            <div class="col-md-5 paddingRightt0">
                                                <input value="<%=uploadFile%>" id="fileNameTitle"
                                                       class="form-control UploadInput" type="text">
                                            </div>
                                            <div class="col-md-5 paddingLeft0">
                                                <button type="button"
                                                        class="btn btn-info border_bottom_left_radius border_top_left_radius"
                                                        onclick="fileClick('fileChooseTitle','fileNameTitle')">
                                                    浏览
                                                </button>
                                            </div>
                                        </div>
                                        <h4 class="font_bold" style="color: #f09b22">选题指南</h4>
                                        <h5 class="font_bold">题目类型</h5>
                                        <select style="margin:0px 5px" class="form-control" id="titleType">
                                            <% let titleTypes = ["艺美设计","工程工业设计","应用研究","理论研究","其他"];
                                            titleTypes.forEach(function(titleType){
                                            if(titleType==genre) {%>
                                            <option value="<%=titleType%>" selected><%=titleType%></option>
                                            <% } else {%>
                                            <option value="<%=titleType%>"><%=titleType%></option>
                                            <%}})
                                            %>
                                        </select>
                                        <h5 class="font_bold">题目来源</h5>
                                        <select style="margin:0px 5px" class="form-control" id="titleSource">
                                            <% let titleSources = ["生产实际（社会实践）题","教师科研课题","其他"];
                                            titleSources.forEach(function(titleSource){
                                            if(titleSource==source) {%>
                                            <option value="<%=titleSource%>" selected><%=titleSource%></option>
                                            <% } else {%>
                                            <option value="<%=titleSource%>"><%=titleSource%></option>
                                            <%}})
                                            %>
                                        </select>
                                        <h5 class="font_bold">可选人数</h5>
                                        <select style="margin:0px 5px" class="form-control" id="numberOptional">
                                            <% for(let i=1;i<5;i++) {
                                            if(i==number) {%>
                                            <option value="<%=i%>" selected><%=i%></option>
                                            <%}else {
                                            %>
                                            <option value="<%=i%>"><%=i%></option>
                                            <%}}%>
                                        </select>
                                        <h5 class="font_bold">可选专业</h5>
                                        <select style="margin:0px 5px" class="form-control" id="optionalProfessional">
                                            <option value="0">本系</option>
                                            <option value="1">全院</option>
                                        </select>
                                        <%}else {%>
                                        <div hidden>
                                            <h5 class="font_bold">课题题目</h5>
                                            <input value="<%=title%>" type="text" name="title">
                                            <h5 style="padding-top: 60px" class="font_bold">题目简介</h5>
                                            <input value="<%=briefIntro%>" type="text" name="briefIntro">
                                            <h5 class="font_bold">添加附件</h5>
                                            <input type="file" style="display: none" name="uploadFile">
                                            <h5 class="font_bold">题目类型</h5>
                                            <input value="<%=genre%>" type="text" name="genre">
                                            <h5 class="font_bold">题目来源</h5>
                                            <input value="<%=source%>" type="text" name="source">
                                            <h5 class="font_bold">可选人数</h5>
                                            <input value="<%=number%>" type="text" name="number">
                                        </div>
                                        <%}%>
                                        <h4 class="font_bold" style="color: #f09b22">任务书（选填）</h4>
                                        <h5 class="font_bold">毕业设计（论文）的主要任务和要求</h5>
                                        <textarea style="margin:0px 5px" rows="5" type="text"
                                                  class="form-control UploadInput" name="task"><%=task%></textarea>
                                        <h5 class="font_bold">推荐的主要参考文献和资料</h5>
                                        <textarea style="margin:0px 5px" rows="8" type="text"
                                                  class="form-control UploadInput"
                                                  name="referData"><%=referData%></textarea>
                                        <h5 class="font_bold">添加附件</h5>
                                        <input id="fileChoose" type="file" style="display: none"
                                               name="uploadTaskBookFile">
                                        <div class="row">
                                            <div class="col-md-5 paddingRightt0">
                                                <input value="<%=uploadTaskBookFile%>" id="fileName"
                                                       class="form-control UploadInput" type="text">
                                            </div>
                                            <div class="col-md-5 paddingLeft0">
                                                <button type="button"
                                                        class="btn btn-info border_bottom_left_radius border_top_left_radius"
                                                        onclick="fileClick('fileChoose','fileName')">
                                                    浏览
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top: 10px">
                                            <div class="col-md-2">
                                                <button type="button" class="btn btn-info"
                                                        onclick="titleUpload('<%=First%>','<%=id%>','<%=cStatus%>')">
                                                    提交
                                                </button>
                                            </div>
                                            <div class="col-md-2">
                                                <button type="button" class="management_one newPage btn btn-success"
                                                        onclick="Unupload('classOne','classOther','UploadInput')">
                                                    取消
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </script>
                            <!--上传题目结束-->
                            <!--审核学生选题开始-->
                            <div class="tab-pane panel-body" id="audit_Students_Topics">
                                <div id="audit_Students_Topic"></div>
                                <!--分页开始-->
                                <div class="col-md-12 col-xs-12">
                                    <div class="m-style" id="studentsPage"></div>
                                </div>
                                <!--分页结束-->
                            </div>
                            <!--审核学生选题结束-->
                        </div>
                        <script id="audit_Students_Topicses" type="text/template">
                            <div style="padding-bottom: 15px;padding-left: 0px" class="col-md-12">
                                <div style="padding-bottom: 15px;padding-left: 0px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-12">
                                        <div class="col-md-12 col-xs-12">
                                            <div class="col-md-1 col-xs-1 padding0">
                                                学生学号：
                                            </div>
                                            <div class="col-md-4 col-xs-4">
                                                <input id="sid" type="text" class="form-control">
                                            </div>
                                            <div class="col-md-1 col-xs-1 padding0">
                                                学生姓名：
                                            </div>
                                            <div class="col-md-4 col-xs-4">
                                                <input id="sName" type="text" class="form-control">
                                            </div>
                                        </div>
                                        <div class="col-md-12 col-xs-12" style="padding-top: 10px">
                                            <div class="col-md-1 col-xs-1 padding0">
                                                课题题目：
                                            </div>
                                            <div class="col-md-4 col-xs-4">
                                                <input id="pName" type="text" class="form-control">
                                            </div>
                                            <div class="col-md-1 col-xs-1 padding0">
                                                教师审核状态：
                                            </div>
                                            <div class="col-md-3 col-xs-3">
                                                <select id="scStatus" style="margin:0px 5px" class="form-control">
                                                    <option value="">全部</option>
                                                    <option value="1">审核通过</option>
                                                    <option value="0">审核不通过</option>
                                                    <option value="3">审核中</option>
                                                </select>
                                            </div>
                                            <div class="col-md-1 col-xs-1" style="padding-left: 5px">
                                                <button type="button" class="btn btn-info"
                                                        onclick="selectedTopicQuery()">查询
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-4">
                                        <div class="col-md-10 col-xs-10" style="padding: 0px">
                                            <h4 class="font_bold">学生选题列表</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        题目类型
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        题目来源
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        学生（学号）
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        审核状态
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-danger textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else {
                                data.forEach(function(item){ %>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div title="<%=item.project.title%>" class="col-md-3 textEllipsis textAlign">
                                        <%=item.project.title%>
                                    </div>
                                    <div title="<%=item.project.genre%>"
                                         class="col-md-1 textEllipsis textAlign padding0">
                                        <%=item.project.genre%>
                                    </div>
                                    <div title="<%=item.project.source%>" class="col-md-2 textEllipsis textAlign">
                                        <%=item.project.source%>
                                    </div>
                                    <div class="col-md-3 textAlign textEllipsis">
                                        <span class="clickColor cursorPointer" data-toggle="modal"
                                              data-target="#studentDetails"
                                              onclick="studentId('<%=item.student.identifier%>')">
                                            <%=item.student.name%>(<%=item.student.identifier%>)
                                        </span>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign padding0">
                                        <% if(item.cStatus==0){ %>
                                        不通过
                                        <% } else if(item.cStatus==1){ %>
                                        审核通过
                                        <% } else { %>
                                        审核中
                                        <% } %>
                                    </div>
                                    <div class="col-md-2 textEllipsis textAlign">
                                        <%if(item.cStatus==3) {%>
                                        <button type="button" class="btn btn-info btn-xs" data-toggle="modal"
                                                data-target="#pass"
                                                onclick="incomingStudentId('<%=item.student.identifier%>','<%=item.project.id%>')">
                                            通 过
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" data-toggle="modal"
                                                data-target="#noPass"
                                                onclick="incomingStudentId('<%=item.student.identifier%>','<%=item.project.id%>')">
                                            不通过
                                        </button>
                                        <%} else{%>
                                        <button type="button" class="btn btn-info btn-xs" disabled>通 过
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" disabled>不通过
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <%})}%>
                            </div>
                        </script>
                    </div>
                </div>
            </div>
            <!--题目管理结束-->
        </div>
    </div>
    <!--删除已出课题开始-->
    <div class="modal fade" id="topicDelete" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        确定要删除该题目？
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-xs btn-white" data-dismiss="modal" id="deleteMiss">取 消</button>
                    <button type="button" class="btn btn-xs btn-danger" onclick="deleteTopic()">保 存</button>
                </div>
            </div>
        </div>
    </div>
    <!--删除已出课题结束-->
    <!--更改已出课题开始-->
    <div id="modifyTopic" class="page-wrapper displayNone">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            修改已出课题
                        </div>
                        <div class="panel-body">
                            <div id="writeGuide"
                                 class="col-md-12 openingReport">
                                <h5 class="font_bold">课题题目</h5>
                                <input type="text" class="form-control" placeholder="课题题目"
                                       style="background-color: #fff;" readonly>
                                <h5 class="font_bold">题目简介</h5>
                                <textarea rows="5" type="text" class="form-control margin05"></textarea>
                                <h5 class="font_bold">题目类型</h5>
                                <select style="margin:0px 5px" class="form-control">
                                    <option value="typeAll">全部</option>
                                    <option value="artBeauty">艺美设计</option>
                                    <option value="engineeringIndustrial">工程工业设计</option>
                                    <option value="application">应用研究</option>
                                    <option value="theoretical">理论研究</option>
                                    <option value="typeOther">其他</option>
                                </select>
                                <h5 class="font_bold">题目来源</h5>
                                <select style="margin:0px 5px" class="form-control">
                                    <option value="sourceAll">全部</option>
                                    <option value="productionPractice">生产实际（社会实践）题</option>
                                    <option value="teacherResearch">教师科研课题</option>
                                    <option value="sourceOther">其他</option>
                                </select>
                                <h5 class="font_bold">是否真题真做的题目</h5>
                                <select style="margin:0px 5px" class="form-control">
                                    <option value="reallyDo">是</option>
                                    <option value="notReallyDo">否</option>
                                </select>
                                <h5 style="display: inline-block;padding-right: 20px" class="font_bold">
                                    如果是真题真做的题目，请填写清楚委托方名称</h5>若不是真题真做的题目，本项请填写“无”
                                <input type="text" class="form-control textContent">
                                <h5 style="padding-top: 40px" class="font_bold">可选人数</h5>
                                <select style="margin:0px 5px" class="form-control">
                                    <option value="one">1</option>
                                    <option value="two">2</option>
                                    <option value="three">3</option>
                                    <option value="four">4</option>
                                    <option value="five">5</option>
                                    <option value="six">6</option>
                                </select>
                                <h5 class="font_bold">添加任务书</h5>
                                <input id="fileChooseCommitments" type="file" style="display: none">
                                <div class="row">
                                    <div class="col-md-5 paddingRightt0">
                                        <input id="fileNameCommitments" class="form-control textContent" type="text">
                                    </div>
                                    <div class="col-md-5 paddingLeft0">
                                        <button type="button"
                                                class="btn btn-info border_bottom_left_radius border_top_left_radius"
                                                onclick="fileClick('fileChooseCommitments','fileNameCommitments')">
                                            浏览
                                        </button>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 10px">
                                    <div class="col-md-2">
                                        <button type="button" class="management_one newPage btn btn-info">
                                            提交
                                        </button>
                                    </div>
                                    <div class="col-md-2">
                                        <button type="button" class="management_one newPage btn btn-success">
                                            取消
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--更改已出课题结束-->
    <!--通过选题开始-->
    <div class="modal fade" id="pass" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">提示</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        确定要通过该学生的选题？
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-xs btn-white" data-dismiss="modal" id="passStudent">取 消
                    </button>
                    <button type="button" class="btn btn-xs btn-danger" onclick="passStudentTopic()">保 存</button>
                </div>
            </div>
        </div>
    </div>
    <!--通过选题结束-->
    <!--不通过选题开始-->
    <div class="modal fade" id="noPass" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">提示</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        确定不通过该学生的选题？
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-xs btn-white" data-dismiss="modal" id="noPassTopic">取 消
                    </button>
                    <button type="button" class="btn btn-xs btn-danger" onclick="noPassStudentTopic()">保 存</button>
                </div>
            </div>
        </div>
    </div>
    <!--不通过选题结束-->
    <!--题目管理结束-->

    <!--答辩管理（教师）开始-->
    <div id="three" class="page-wrapper displayNone">
        <div style="margin: 0px" class="page-inner">
            <!--题目管理开始-->
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div style="background-color: #f5f5f5">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="active queryArrange"><a href="#reply_arrange_self" role="tab"
                                                                   data-toggle="tab">查看教师答辩安排</a></li>
                                <li class="RatingArrange" onclick="DefenseRating()"><a href="#defense_rating" role="tab"
                                                                                       data-toggle="tab">答辩打分</a>
                                </li>
                                <li id="DefenseLeader" class="leaderDefense displayNone" onclick="queryDefenseScore()">
                                    <a
                                            href="#defense_Situation"
                                            role="tab"
                                            data-toggle="tab">答辩组长提交答辩打分情况</a>
                                </li>
                                <li class="graduationDesign" onclick="queryGraduationDesignReview()"><a
                                        href="#grade_Papers"
                                        role="tab"
                                        data-toggle="tab">毕业设计评审</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content">
                            <!--查看教师答辩安排开始-->
                            <div class="tab-pane active panel-body queryArrange" id="reply_arrange_self">
                            </div>
                            <script id="reply_arrange_selfs" type="text/template">
                                <div class="col-md-12">
                                    <h4 class="font_bold">教师信息</h4>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-4 textAlign">
                                        答辩时间
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        答辩教室
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        答辩组长
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        分组
                                    </div>
                                    <div class="col-md-5 textAlign">
                                        答辩教师
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-danger textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%} else{ %>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div class="col-md-4 textAlign">
                                        <%
                                        let unixTimestamp = new Date(data.defDate ) ;
                                        let year = unixTimestamp.getFullYear();
                                        let month = unixTimestamp.getMonth()+1;
                                        let date = unixTimestamp.getDate();
                                        commonTime = year+"年"+month+"月"+date+"日"
                                        %>
                                        <%= commonTime %> 上午8:00
                                        第<%=data.defWeek%>周
                                        星期<%=data.defDay%>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <%=data.defClass%>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <%data.teaGroup.forEach(function(tea){
                                        if(tea.leader){%>
                                        <span class="clickColor cursorPointer" data-toggle="modal"
                                              data-target="#teacherDetails"
                                              onclick="queryTeacherPlea('<%=tea.teaAuth.id%>')"><%=tea.teaAuth.name%></span>
                                        <%}})%>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        第<%=data.groupId%>组
                                    </div>
                                    <div class="col-md-5 textAlign">
                                        <%data.teaGroup.forEach(function(tea){
                                        if(!(tea.leader)){%>
                                        <span class="clickColor cursorPointer" data-toggle="modal"
                                              data-target="#teacherDetails"
                                              onclick="queryTeacherPlea('<%=tea.teaAuth.id%>')"><%=tea.teaAuth.name%></span>
                                        <%}})%>
                                    </div>
                                </div>
                                <%}%>
                                <div class="col-md-12">
                                    <h4 class="font_bold">学生信息</h4>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-4 textAlign">
                                        答辩学生（学号）
                                    </div>
                                    <div class="col-md-4 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-4 textAlign">
                                        指导教师（工号）
                                    </div>
                                </div>
                                <%if(data=="" || students==""){%>
                                <div class="alert alert-danger textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else{
                                students.forEach(function(student){%>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div class="col-md-4 textAlign">
                                        <span class="clickColor cursorPointer" data-toggle="modal"
                                              data-target="#studentDetails"
                                              onclick="studentPleaId('<%=student.identifier%>')">
                                            <%=student.name%>(<%=student.identifier%>)
                                        </span>
                                    </div>
                                    <div class="col-md-4 textAlign textEllipsis">
                                        <%=student.pName%>
                                    </div>
                                    <div class="col-md-4 textAlign">
                                        <%=student.gt.name%>（<%=student.gt.id%>）
                                    </div>
                                </div>
                                <%})%>
                                <%}%>
                            </script>
                            <!--查看教师答辩安排结束-->
                            <!--答辩打分开始-->
                            <div class="tab-pane panel-body RatingArrange" id="defense_rating">
                            </div>
                            <script id="defense_ratinges" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        学生姓名(学号)
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        指导教师（工号）
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        分数
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">暂无数据</div>
                                <%} else{
                                data.forEach(function(student){%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div title="<%=student.pName%>" class="col-md-3 textAlign textEllipsis">
                                        <%=student.pName%>
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        <%=student.name%>（<%=student.identifier%>）
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        <%=student.gt.name%>（<%=student.gt.id%>）
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <%if(typeof(student.defScore)!="undefined"&&student.defScore.hasScored) {%>
                                        <%=student.defScore.scoreTotal%>
                                        <%} else{%>
                                        未打分
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <button type="button" class="btn btn-info btn-xs" data-toggle="modal"
                                                data-target="#defenseScore"
                                                onclick="ViewPleaScore('<%=student.identifier%>')">查看
                                        </button>
                                        <%if(typeof(student.defScore)!="undefined"&&student.defScore.hasScored) {%>
                                        <button type="button"
                                                class="btn btn-info btn-xs" disabled>打分
                                        </button>
                                        <%} else{%>
                                        <button type="button"
                                                class="management_score newPage btn btn-info btn-xs"
                                                onclick="DefenseRatingId('<%=student.pName%>','<%=student.name%>','<%=student.identifier%>','<%=student.gt.name%>')">
                                            打分
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <%})}%>
                            </script>
                            <!--答辩打分安排结束-->
                            <!--答辩组长提交答辩打分情况开始-->
                            <div class="tab-pane panel-body leaderDefense" id="defense_Situation">
                            </div>
                            <script id="defense_Situations" type="text/template">
                                <%if(data=="") {%>
                                <div class="alert alert-success textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else {%>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        学生姓名（学号）
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        答辩分数
                                    </div>
                                    <%if(teachers!=""){%>
                                    <%teachers.forEach(function(teacher){%>
                                    <div class="col-md-1 textAlign">
                                        <%=teacher.tea.name%>
                                    </div>
                                    <%})}%>
                                </div>
                                <%data.forEach(function(item){%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign textEllipsis">
                                        <%=item.name%>（<%=item.identifier%>）
                                    </div>
                                    <div title="<%=item.pName%>" class="col-md-3 textAlign textEllipsis">
                                        <%=item.pName%>
                                    </div>
                                    <%if(typeof(item.defenceScore)=="undefined") {%>
                                    <div class="col-md-6 textAlign">
                                        暂无打分信息
                                    </div>
                                    <%}else {%>
                                    <div class="col-md-1 textAlign">
                                        <%=item.defenceScore.scoreDefence%>
                                    </div>
                                    <%item.defenceScore.defScoreList.forEach(function(score){%>
                                    <div class="col-md-1 textAlign">
                                        <div style="padding-bottom: 2px">
                                            <%if(score.hasScored){%>
                                            <%=score.scoreTotal%>
                                            <%} else {%>
                                            未打分
                                            <%}%>
                                        </div>
                                    </div>
                                    <%})%>
                                    <%}%>

                                </div>
                                <%})%>
                                <div style="margin-top: 10px">
                                    <div class="col-md-10">
                                    </div>
                                    <div class="col-md-2">
                                        <button style="float: right;" type="button" class="btn btn-info"
                                                onclick="submitScoreGroup()">
                                            提交
                                        </button>
                                    </div>
                                </div>
                                <%}%>
                            </script>
                            <!--答辩组长提交答辩打分情况结束-->
                            <!--答辩论文打分开始-->
                            <div class="tab-pane panel-body graduationDesign" id="grade_Papers">
                            </div>
                            <script id="grade_Paperses" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-5 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        学生姓名
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        学生学号
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        分数
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%if(data==""){%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else{%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div title="<%=data[0].pName%>" class="col-md-5 textAlign textEllipsis">
                                        <%=data[0].pName%>
                                    </div>
                                    <div class="col-md-1 textAlign textEllipsis">
                                        <%=data[0].name%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%=data[0].identifier%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%if(data[0].reviewTeaGroup.hasReviewed){%>
                                        <%=data[0].reviewTeaGroup.scoreTotal%>
                                        <%}else{%>
                                        暂无分数
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <button type="button" class="btn btn-info btn-xs" data-toggle="modal"
                                                data-target="#viewScore"
                                                onclick="ViewEssayScores('<%=data[0].identifier%>')">查看
                                        </button>
                                        <%if(data[0].hasReviewed){%>
                                        <button type="button" class="btn btn-info btn-xs" disabled>
                                            打分
                                        </button>
                                        <%}else{%>
                                        <button type="button"
                                                onclick="scorePleaStudents('<%=data[0].pName%>','<%=data[0].name%>','<%=data[0].identifier%>','<%=data[0].gt.name%>')"
                                                class="btn btn-info btn-xs">
                                            打分
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <%}%>
                            </script>
                            <!--答辩论文打分结束-->
                        </div>
                    </div>
                </div>
            </div>
            <!--题目管理结束-->
        </div>
    </div>
    <!--答辩打分开始 -->
    <div id="score" class="page-wrapper displayNone">
    </div>
    <script id="scores" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            答辩打分
                        </div>
                        <div class="panel-body">
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textEllipsis">
                                    课题题目：<%=pName%>
                                </div>
                            </div>
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-3">
                                    学生姓名：<%=name%>
                                </div>
                                <div class="col-md-4">
                                    学生学号：<%=identifier%>
                                </div>
                                <div class="col-md-5">
                                    指导教师姓名：<%=teacherName%>
                                </div>
                            </div>
                            <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    序号
                                </div>
                                <div class="col-md-2 textAlign">
                                    评审事项
                                </div>
                                <div class="col-md-6 textAlign">
                                    指标
                                </div>
                                <div class="col-md-1 textAlign">
                                    满分
                                </div>
                                <div class="col-md-2 textAlign">
                                    评分
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    1
                                </div>
                                <div class="col-md-2 textAlign">
                                    报告过程
                                </div>
                                <div class="col-md-6 textAlign textEllipsis">
                                    准备工作充分，时间符合要求
                                </div>
                                <div class="col-md-1 textAlign">
                                    5
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="reportingProcess"
                                           onkeyup="reportingProcessScore('reportingProcess',5)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    2
                                </div>
                                <div class="col-md-2 textAlign">
                                    报告内容
                                </div>
                                <div class="col-md-6 textAlign textEllipsis">
                                    思路清晰；语言表达准确，概念清楚；报告内容简介扼要；分析归纳合理
                                </div>
                                <div class="col-md-1 textAlign">
                                    10
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="reportingContent"
                                           onkeyup="reportingContentScore('reportingContent',10)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    3
                                </div>
                                <div class="col-md-2 textAlign">
                                    适用价值
                                </div>
                                <div class="col-md-6 textAlign textEllipsis">
                                    对前人的工作有改进或突破，有一定的实用背景和实用价值
                                </div>
                                <div class="col-md-1 textAlign">
                                    5
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="applicableValue"
                                           onkeyup="applicableValueScore('applicableValue',5)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    4
                                </div>
                                <div class="col-md-2 textAlign">
                                    答辩
                                </div>
                                <div class="col-md-6 textAlign textEllipsis">
                                    回答内容有理论依据，基本概念清楚。主要问题回答准确，深入
                                </div>
                                <div class="col-md-1 textAlign">
                                    20
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="plea"
                                           onkeyup="pleaScore('plea',20)">
                                </div>

                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textAlign">
                                    <textarea id="comment" rows="4" class="form-control pleaScoreinput"
                                              style="width: 100%"
                                              placeholder="答辩简要记录及评语"></textarea>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 10px">
                                <div class="col-md-2">
                                    <button type="button" onclick="DetermineDefenseScore('<%=identifier%>')"
                                            class="btn btn-info">
                                        确定
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="management_three newPage  btn btn-success"
                                            onclick="gobackThree('score')">
                                        返回
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--答辩打分结束-->
    <!--毕业设计评审开始-->
    <div id="scorePlea" class="page-wrapper displayNone">
    </div>
    <script id="scorePleas" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            毕业设计评审
                        </div>
                        <div class="panel-body">
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textEllipsis">
                                    课题题目：<%=pName%>
                                </div>
                            </div>
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-3">
                                    学生姓名：<%=name%>
                                </div>
                                <div class="col-md-4">
                                    学生学号：<%=identifier%>
                                </div>
                                <div class="col-md-5">
                                    指导教师姓名：<%=teacherName%>
                                </div>
                            </div>
                            <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    序号
                                </div>
                                <div class="col-md-2 textAlign">
                                    评审项目
                                </div>
                                <div class="col-md-6 textAlign">
                                    指标
                                </div>
                                <div class="col-md-1 textAlign">
                                    满分
                                </div>
                                <div class="col-md-2 textAlign">
                                    评分
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    1
                                </div>
                                <div class="col-md-2 textAlign normalSpace">
                                    翻译资料、综述材料
                                </div>
                                <div class="col-md-6 normalSpace">
                                    查阅的文献比较广泛；翻译准确、通顺、文字流畅；综述材料充分，使用正确、合理；
                                    文理通顺，语言流畅，用语准确、规范；有综合归纳资料的能力。
                                </div>
                                <div class="col-md-1 textAlign">
                                    3
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="reviewTranslation"
                                           onkeyup="reviewTranslationScore('reviewTranslation',3)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    2
                                </div>
                                <div class="col-md-2 normalSpace">
                                    设计质量及设计说明书质量
                                </div>
                                <div class="col-md-6 normalSpace">
                                    方案设计合理，方案综合比较论证充分，切实可行，有较详细的实施措施；
                                    技术路线正确，数据采集、计算、处理方式正确；结构设计合理、工艺可行、推导正确或程序运行可靠；
                                    设计说明书文理通顺，语言流畅、技术用语准确，符号统一、规范，编号齐全、书写工整规范；
                                    图表完备、整洁、正确；绘图符合国家标准。
                                </div>
                                <div class="col-md-1 textAlign">
                                    10
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="designQuality"
                                           onkeyup="designQualityScore('designQuality',10)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    3
                                </div>
                                <div class="col-md-2 textAlign">
                                    工作量、难度
                                </div>
                                <div class="col-md-6 normalSpace">
                                    完成的工作达到了教学基本要求，工作量饱满，难度系数较大。
                                </div>
                                <div class="col-md-1 textAlign">
                                    5
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="workloadDifficulty"
                                           onkeyup="designQualityScore('workloadDifficulty',5)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    4
                                </div>
                                <div class="col-md-2 textAlign">
                                    创新
                                </div>
                                <div class="col-md-6 normalSpace">
                                    有重大改进或独特见解；有一定应用价值。
                                </div>
                                <div class="col-md-1 textAlign">
                                    2
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="innovation"
                                           onkeyup="innovationScore('innovation',2)">
                                </div>

                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textAlign">
                                    <textarea rows="4" class="form-control pleaScoreinput" style="width: 100%"
                                              placeholder="评语" id="commentGraduation"></textarea>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 10px">
                                <div class="col-md-2">
                                    <button type="button" onclick="SubmitGraduationEvaluation('<%=identifier%>')"
                                            class="btn btn-info">
                                        确定
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-success"
                                            onclick="gobackThree('scorePlea')">
                                        返回
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--毕业设计评审结束-->
    <!--查看答辩分数详细信息开始-->
    <div class="modal fade" id="defenseScore" role="dialog">
    </div>
    <script id="defenseScores" type="text/template">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">学生答辩打分详细信息</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <%if(data==""){%>
                        <span>暂无数据</span>
                        <%} else{%>
                        <strong>
                            <span>课题题目:</span>
                        </strong>
                        <span><%=data[0].pName%></span>
                        <hr>
                        <strong>
                            <span>学生姓名:</span>
                        </strong>
                        <span>
                            <%=data[0].name%>
                        </span>
                        <hr>
                        <strong>
                            <span>学生学号:</span>
                        </strong>
                        <span><%=data[0].identifier%></span>
                        <hr>
                        <%if(typeof(data[0].defScore)!="undefined"&&data[0].defScore.hasScored){%>
                        <strong>
                            <span>答辩成绩</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.scoreTotal%>
                        </span>
                        <hr>
                        <strong>
                            <span>报告过程得分</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.scoreProcess%>
                        </span>
                        <hr>
                        <strong>
                            <span>报告内容得分</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.scoreReport%>
                        </span>
                        <hr>
                        <strong>
                            <span>实用价值得分</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.scoreWorth%>
                        </span>
                        <hr>
                        <strong>
                            <span>答辩得分</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.scoreDefence%>
                        </span>
                        <hr>
                        <strong>
                            <span>评语</span>
                        </strong>
                        <span>
                            <%=data[0].defScore.comment%>
                        </span>
                        <hr>
                        <%}else{%>
                        <strong>
                            <span>答辩成绩</span>
                        </strong>
                        <span>
                            暂无分数
                        </span>
                        <hr>
                        <%}}%>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </script>
    <!--查看答辩分数详细信息结束-->
    <!--查看毕业评审打分详细信息开始-->
    <div class="modal fade" id="viewScore" role="dialog">
    </div>
    <script id="viewScores" type="text/template">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">学生毕业评审分数详细信息</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <strong>
                            <span>课题题目:</span>
                        </strong>
                        <span><%=data.pName%></span>
                        <hr>
                        <strong>
                            <span>学生姓名:</span>
                        </strong>
                        <span>
                            <%=data.name%>
                        </span>
                        <hr>
                        <strong>
                            <span>学生学号:</span>
                        </strong>
                        <span><%=data.identifier%></span>
                        <hr>
                        <%if(data.reviewTeaGroup.hasReviewed){%>
                        <strong>
                            <span>评阅成绩</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.scoreTotal%>
                        </span>
                        <hr>
                        <strong>
                            <span>综述材料得分</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.scoreLiterature%>
                        </span>
                        <hr>
                        <strong>
                            <span>说明书得分</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.scoreInstruction%>
                        </span>
                        <hr>
                        <strong>
                            <span>工作量得分</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.scoreWorkload%>
                        </span>
                        <hr>
                        <strong>
                            <span>创新得分</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.scoreInnovate%>
                        </span>
                        <hr>
                        <strong>
                            <span>评语</span>
                        </strong>
                        <span>
                            <%=data.reviewTeaGroup.comment%>
                        </span>
                        <hr>
                        <%}else{%>
                        <strong>
                            <span>评阅成绩</span>
                        </strong>
                        <span>
                            暂无分数
                        </span>
                        <hr>
                        <%}%>

                        <strong>
                            <span>附件</span>
                        </strong>
                        <span>
                            <% if(typeof(data.graduationProject)=="undefined" || typeof(data.graduationProject.docFile)=="undefined" || data.graduationProject.docFileId == 0) { %>
                                    暂未上传毕业设计论文
                                    <% } else { %>
                                    附件：<%=data.graduationProject.docFile.fileName %> <a style="padding-left: 20px"
                                                                                        href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.graduationProject.docFileId %>">点击下载</a>
                                    <% } %>
                        </span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </script>
    <!--查看毕业评审打分详细信息结束-->
    <!--答辩管理（教师）结束-->

    <!--学生管理开始-->
    <div id="student" class="page-wrapper displayNone">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div style="background-color: #f5f5f5">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="active"><a href="#send_Ntification" role="tab"
                                                      data-toggle="tab">发送通知</a></li>
                                <li onclick="studentReply()"><a href="#reply_arrange" role="tab"
                                                                data-toggle="tab">查看指导学生答辩安排</a></li>
                                <li onclick="queryMaterial()"><a href="#review_Material" role="tab" data-toggle="tab">审核材料</a>
                                </li>
                                <li onclick="grade_Papers()"><a href="#tutor_grade_Papers" role="tab" data-toggle="tab">毕业设计指导教师评审</a>
                                </li>
                                <li onclick="PerformancePublic()"><a href="#reply_results" role="tab" data-toggle="tab">成绩公示</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content">
                            <!--发送通知开始-->
                            <div class="tab-pane active panel-body" id="send_Ntification">
                            </div>
                            <script id="send_Ntifications" type="text/template">
                                <div style="padding-bottom: 10px">
                                    <button type="button" class="btn btn-info" data-toggle="modal"
                                            data-target="#notificationContent">发送通知
                                    </button>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        <input id="student_notice" name="checkboxNotices"
                                               onchange="selectAll('student_notice','checkbox_notice')" type="checkbox"
                                               value="1"/>
                                    </div>
                                    <div class="col-md-3">
                                        姓名
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        学号
                                    </div>
                                    <div class="col-md-5 textAlign">
                                        课题题目
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-danger textAlign border_radius marginBottom0">暂无数据</div>
                                <%}else{
                                data.forEach(function(student){%>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textEllipsis textAlign">
                                        <input class="checkbox_notice" name="checkboxs" type="checkbox"
                                               value="<%=student.identifier%>"/>
                                    </div>
                                    <div class="col-md-3 textEllipsis">
                                        <%=student.name%>
                                    </div>
                                    <div class="col-md-3 textEllipsis textAlign">
                                        <%=student.identifier%>
                                    </div>
                                    <div class="col-md-5 textEllipsis textAlign">
                                        <%=student.pName%>
                                    </div>
                                </div>
                                <%})}%>
                            </script>
                            <!--发送通知结束-->
                            <!--查看指导学生答辩安排开始-->
                            <div class="tab-pane panel-body" id="reply_arrange">
                                <div style="padding-bottom: 15px;padding-left: 0px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-12">
                                        <div class="col-md-12 col-xs-12">
                                            <div class="col-md-1 col-xs-1 padding0">
                                                学生姓名：
                                            </div>
                                            <div class="col-md-2 col-xs-2">
                                                <input id="studentName" type="text" class="form-control">
                                            </div>
                                            <div class="col-md-1 col-xs-1"></div>
                                            <div class="col-md-1 col-xs-1 padding0">
                                                学生学号：
                                            </div>
                                            <div class="col-md-3 col-xs-3">
                                                <input id="studentIds" type="text" class="form-control">
                                            </div>
                                            <div class="col-md-2 col-xs-2"></div>
                                            <div class="col-md-1 col-xs-1" style="padding-left: 5px">
                                                <button type="button" class="btn btn-info"
                                                        onclick="studentReply()">查询
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="students_Reply"></div>
                            </div>
                            <script id="students_Replys" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        学生姓名
                                    </div>
                                    <div class="col-md-4 textAlign">
                                        答辩时间
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        答辩教室
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        答辩组长
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        答辩教师
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        评审教师
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        分组
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else{
                                data.forEach(function(student){%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 padding0 textEllipsis textAlign">
                                        <%=student.name%>
                                    </div>
                                    <%if(typeof(student.defInfo)=="undefined") {%>
                                    <div class="col-md-11 textEllipsis textAlign">
                                        暂无答辩安排
                                    </div>
                                    <%} else {%>
                                    <div class="col-md-4 textEllipsis textAlign padding0">
                                        <%
                                        let unixTimestamp = new Date(student.defInfo.defDate ) ;
                                        let year = unixTimestamp.getFullYear();
                                        let month = unixTimestamp.getMonth()+1;
                                        let date = unixTimestamp.getDate();
                                        commonTime = year+"年"+month+"月"+date+"日"
                                        %>
                                        <%= commonTime %>上午8:00
                                        第<%=student.defInfo.defWeek%>周
                                        星期<%=student.defInfo.defDay%>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign">
                                        <%=student.defInfo.defClass%>
                                    </div>
                                    <div class="col-md-1 textAlign textEllipsis">
                                        <% student.defInfo.teaGroup.forEach(function(group){
                                        if(group.leader) {%>
                                        <%=group.teaAuth.name%>
                                        <% }
                                        }
                                        )%>
                                    </div>
                                    <div class="col-md-3 textAlign textEllipsis padding0">
                                        <% student.defInfo.teaGroup.forEach(function(group){
                                        if(!group.leader) {%>
                                        <%=group.teaAuth.name%>
                                        <% }
                                        }
                                        )%>
                                    </div>
                                    <div class="col-md-1 textAlign textEllipsis padding0">
                                        <%if(typeof(student.mt)=="undefined") {%>
                                        暂无数据
                                        <%}else{%>
                                        <%=student.mt.name%>
                                        <%}%>
                                    </div>
                                    <div class="col-md-1 textAlign textEllipsis">
                                        第<%=student.defInfo.groupId%>组
                                    </div>
                                    <%}%>
                                </div>
                                <%})}%>
                            </script>
                            <!--查看指导学生答辩安排结束-->
                            <!--审核材料开始-->
                            <div class="tab-pane panel-body" id="review_Material">
                            </div>
                            <script id="review_Materials" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        学生姓名
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        学生学号
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        开题报告
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        中期检查
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        指导记录
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        外文译文和原文
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        文献综述
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        毕业设计（论文）
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">暂无数据</div>
                                <%}else {
                                data.forEach(function(student){%>
                                <% let title="";
                                student.proChooseList.forEach(function(titles){
                                if(titles.cStatus==1) {
                                title = titles.project.title
                                }});%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        <%=student.name%>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <%=student.identifier%>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <span onclick="openingReportDocument('<%=student.identifier%>','1','<%=student.name%>','<%=title%>')"
                                              class="newPage clickColor cursorPointer">
                                            完成 <%=student.progressList[0]%>%
                                        </span>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <span onclick="IntermediateDocument('<%=student.identifier%>','2','<%=student.name%>','<%=title%>')"
                                              class="clickColor cursorPointer">
                                            完成 <%=student.progressList[1]%>%
                                        </span>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <span onclick="queryGuideRecord('<%=student.identifier%>','<%=student.name%>','<%=title%>')"
                                              class="clickColor cursorPointer">
                                            完成 <%=student.progressList[2]%>%
                                        </span>
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        <span onclick="ForeignTranslationDocument('<%=student.identifier%>','3','<%=student.name%>','<%=title%>')"
                                              class="clickColor cursorPointer">
                                            完成 <%=student.progressList[3]%>%
                                        </span>
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        <span onclick="LiteratureReviewDocument('<%=student.identifier%>','4','<%=student.name%>','<%=title%>')"
                                              class="clickColor cursorPointer">
                                            完成 <%=student.progressList[4]%>%
                                        </span>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <span onclick="queryGraduationDesign('<%=student.identifier%>','<%=student.name%>','<%=title%>')"
                                              class="clickColor cursorPointer">
                                            完成 <%=student.progressList[5]%>%
                                        </span>
                                    </div>
                                </div>
                                <%})}%>
                            </script>
                            <!--审核材料结束-->
                            <!--毕业设计指导教师评审开始-->
                            <div class="tab-pane panel-body" id="tutor_grade_Papers">
                            </div>
                            <script id="tutor_grade_Paperses" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        学生姓名
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        学生学号
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        评审分数
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        是否同意答辩
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%if(data==""){%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">
                                    暂无数据
                                </div>
                                <%}else{
                                data.forEach(function(student){%>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div title="<%=student.pName%>" class="col-md-3 textAlign textEllipsis">
                                        <%=student.pName%>
                                    </div>
                                    <div class="col-md-1 textAlign textEllipsis">
                                        <%=student.name%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%=student.identifier%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%if(student.guidanceTeaGroup.hasReviewed) {%>
                                        <%=student.guidanceTeaGroup.scoreTotal%>
                                        <%}else {%>
                                        暂无分数
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textAlign textEllipsis">
                                        <%if(student.guidanceTeaGroup.attendDefence) {%>
                                        同意答辩
                                        <%}else {%>
                                        不同意答辩
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <button type="button" class="btn btn-info btn-xs" data-toggle="modal"
                                                data-target="#tutor_viewScore"
                                                onclick="viewScoreId('<%=student.identifier%>')">查看
                                        </button>
                                        <%if(student.guidanceTeaGroup.hasReviewed) {%>
                                        <button type="button" class="btn btn-info btn-xs" disabled>
                                            打分
                                        </button>
                                        <%}else{%>
                                        <button type="button"
                                                onclick="tutor_scorePleaOfStudent('<%=student.identifier%>')"
                                                class="btn btn-info btn-xs">
                                            打分
                                        </button>
                                        <%}%>

                                    </div>
                                </div>
                                <%})}%>
                            </script>
                            <!--毕业设计指导教师评审结束-->
                            <!--成绩公示开始-->
                            <div class="tab-pane panel-body" id="reply_results">
                                <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-4">
                                        <div class="col-md-10 col-xs-10" style="padding: 0px">
                                            <h4 class="font_bold">权重信息</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-info textEllipsis">
                                    综合评定成绩 = 指导成绩成绩*40% + 评阅成绩成绩*20% + 答辩成绩成绩*40%
                                </div>
                                <div style="padding-bottom: 15px;padding-left: 0px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-12">
                                        <div class="col-md-1 col-xs-1" style="padding: 0px">
                                            学生姓名：
                                        </div>
                                        <div class="col-md-4 col-xs-4">
                                            <input type="text" class="form-control" id="stuName">
                                        </div>
                                        <div class="col-md-1 col-xs-1" style="padding: 0px">
                                            学生学号：
                                        </div>
                                        <div class="col-md-4 col-xs-4">
                                            <input type="text" class="form-control" id="StuId">
                                        </div>
                                        <div class="col-md-2 col-xs-2" style="padding-left: 5px">
                                            <button type="button" class="btn btn-info" onclick="resultsRankQuery()">查询
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                    <div style="padding-left: 0px" class="col-md-4">
                                        <div class="col-md-10 col-xs-10" style="padding: 0px">
                                            <h4 class="font_bold">学生答辩成绩列表</h4>
                                        </div>
                                    </div>
                                </div>
                                <div id="scoresRanking"></div>
                            </div>
                            <script id="scoresRankings" type="text/template">
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        成绩排名
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        学生姓名（学号）
                                    </div>
                                    <div class="col-md-5 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        综合评定成绩
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        毕业设计成绩等级
                                    </div>
                                </div>
                                <%if(data=="") {%>
                                <div class="alert alert-warning textAlign border_radius marginBottom0">暂无数据</div>
                                <%} else{
                                let index = 0;
                                data.forEach(function(student){
                                index++; %>
                                <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                    <div class="col-md-1 textAlign">
                                        <%=index%>
                                    </div>
                                    <div class="col-md-3 textAlign textEllipsis">
                                        <%=student.name%>（<%=student.identifier%>）
                                    </div>
                                    <div class="col-md-5 textAlign textEllipsis">
                                        <%=student.pName%>
                                    </div>
                                    <%if(typeof(student.proScore)=="undefined"||!student.proScore.hasReviewed) {%>
                                    <div class="col-md-2 textAlign padding0">暂无综合评定成绩</div>
                                    <%}else{%>
                                    <div class="col-md-1 textAlign">
                                        <%=student.proScore.scoreTotal%>
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        <%=student.proScore.grade%>
                                    </div>
                                    <%}%>
                                </div>
                                <%})}%>
                            </script>
                            <!--成绩公示结束-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--发送通知内容开始-->
    <div class="modal fade" id="notificationContent" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">发送通知</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success row">
                        <div class="col-md-2">
                            <strong>
                                <span>通知内容:</span>
                            </strong>
                        </div>
                        <div class="col-md-10">
                            <textarea id="noticeContent" class="form-control" style="width: 100%" rows="10"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="sendNotification()" class="btn btn-sm btn-success"
                            data-dismiss="modal">确定
                    </button>
                    <button onclick="cancelNotification()" type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <!--发送通知内容结束-->
    <!--查看毕业设计指导教师评审分数详情开始-->
    <div class="modal fade" id="tutor_reviewPapers" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">毕业设计指导教师评审分数详情</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <strong>
                            <span>课题题目:</span>
                        </strong>
                        <span>PMMA灯具基于moldflow三维流动优化的注</span>
                        <hr>
                        <strong>
                            <span>姓名（学号）:</span>
                        </strong>
                        <span>张珊珊（3120150905111）</span>
                        <hr>
                        <strong>
                            <span>调查、论证（4）:</span>
                        </strong>
                        <span>4</span>
                        <hr>
                        <strong>
                            <span>方案设计与技术路线（8）:</span>
                        </strong>
                        <span>
                            7
                        </span>
                        <hr>
                        <strong>
                            <span>分析与解决问题的能力（8）:</span>
                        </strong>
                        <span>6</span>
                        <hr>
                        <strong>
                            <span>工作量、工作态度（6）:</span>
                        </strong>
                        <span>6</span>
                        <hr>
                        <strong>
                            <span>设计质量及设计说明书质量（10）:</span>
                        </strong>
                        <span>9</span>
                        <hr>
                        <strong>
                            <span>创新（4）：</span>
                        </strong>
                        <span>4</span>
                        <hr>
                        <strong>
                            <span>总分：</span>
                        </strong>
                        <span>90</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <!--查看毕业设计指导教师评审分数详情结束-->
    <!--毕业设计指导教师评审开始-->
    <div id="tutor_scorePlea" class="page-wrapper displayNone">

    </div>
    <script id="tutor_scorePleas" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            毕业设计指导教师评审
                        </div>
                        <div class="panel-body">
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textEllipsis">
                                    课题题目：<%=data.pName%>
                                </div>
                            </div>
                            <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                <div class="col-md-3">
                                    学生姓名：<%=data.name%>
                                </div>
                                <div class="col-md-4">
                                    学生学号：<%=data.identifier%>
                                </div>
                            </div>
                            <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    序号
                                </div>
                                <div class="col-md-2 textAlign">
                                    评审项目
                                </div>
                                <div class="col-md-6 textAlign">
                                    指标
                                </div>
                                <div class="col-md-1 textAlign">
                                    满分
                                </div>
                                <div class="col-md-2 textAlign">
                                    评分
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    1
                                </div>
                                <div class="col-md-2 textAlign normalSpace">
                                    调查、论证
                                </div>
                                <div class="col-md-6 normalSpace">
                                    能独立查阅文献和调研；能正确翻译外文资料；能较好地写出开题报告；
                                    有收集、综合及正确利用各种信息及获取新知识的能力。
                                </div>
                                <div class="col-md-1 textAlign">
                                    4
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput"
                                           id="investigationDemonstration"
                                           onkeyup="investigationDemonstrationScore('investigationDemonstration',4)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    2
                                </div>
                                <div class="col-md-2 normalSpace">
                                    方案设计与技术路线
                                </div>
                                <div class="col-md-6 normalSpace">
                                    方案设计合理，方案综合比较论证充分，切实可行，有较详细的实施措施；
                                    技术路线正确，拟采用数据采集、计算、处理方式正确；
                                    结构设计合理、工艺具有可行性、推导正确或程序运行具有可靠性；
                                </div>
                                <div class="col-md-1 textAlign">
                                    8
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="technicalRoute"
                                           onkeyup="technicalRouteScore('technicalRoute',8)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    3
                                </div>
                                <div class="col-md-2 textAlign">
                                    分析与解决问题的能力
                                </div>
                                <div class="col-md-6 normalSpace">
                                    能运用所学知识和技能去发现问题，分析问题思路清晰、严谨，
                                    数据处理正确，理论分析文理清楚。
                                </div>
                                <div class="col-md-1 textAlign">
                                    8
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="analyzeSolve"
                                           onkeyup="analyzeSolveScore('analyzeSolve',8)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    4
                                </div>
                                <div class="col-md-2 textAlign">
                                    工作量、工作态度
                                </div>
                                <div class="col-md-6 normalSpace">
                                    按期完成规定的任务，认真记录了毕业设计（论文）过程中存在的问题、相关数据及处理方式，
                                    难易程度和工作量符合教学要求；工作努力，遵守纪律；工作作风严谨务实；善于与他人合作。
                                </div>
                                <div class="col-md-1 textAlign">
                                    6
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="workAttitude"
                                           onkeyup="workAttitudeScore('workAttitude',6)">
                                </div>

                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    5
                                </div>
                                <div class="col-md-2 textAlign normalSpace">
                                    设计质量及设计说明书质量
                                </div>
                                <div class="col-md-6 normalSpace">
                                    方案设计合理，切实可行，技术路线正确，所用的数据采集、计算、处理方式正确，
                                    数据真实可信，结构、工艺设计合理，设计说明书文理通顺，语言流畅、技术用语准确，
                                    符号统一、规范，编号齐全；图表完备、整洁、正确；绘图符合国家标准。
                                </div>
                                <div class="col-md-1 textAlign">
                                    10
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="designSpecification"
                                           onkeyup="designSpecificationScore('designSpecification',10)">
                                </div>

                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 textAlign">
                                    6
                                </div>
                                <div class="col-md-2 textAlign">
                                    创新
                                </div>
                                <div class="col-md-6 normalSpace">
                                    工作中有创新意识；对前人工作有改进、突破，或立意新颖、见解独特，有一定应用价值。
                                </div>
                                <div class="col-md-1 textAlign">
                                    4
                                </div>
                                <div class="col-md-2 textAlign">
                                    <input type="text" class="form-control pleaScoreinput" id="designInnovation"
                                           onkeyup="designInnovationScore('designInnovation',10)">
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-1 padding0">是否同意答辩</div>
                                <div class="col-md-2">
                                    <select class="form-control" id="agreeReply">
                                        <option value="1">是</option>
                                        <option value="0">否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="alert alert-warning textEllipsis border_radius marginBottom0">
                                <div class="col-md-12 textAlign">
                                    <textarea rows="4" class="form-control pleaScoreinput" style="width: 100%"
                                              placeholder="评语" id="paperComment"></textarea>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 10px">
                                <div class="col-md-2">
                                    <button type="button" onclick="graduationDesignReview('<%=data.identifier%>')"
                                            class="btn btn-info">
                                        确定
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="management_student newPage  btn btn-success"
                                            onclick="cancelTitle('pleaScoreinput')">
                                        返回
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--毕业设计指导教师评审开始-->
    <!--查看答辩打分详细信息开始-->
    <div class="modal fade" id="tutor_viewScore" role="dialog">
    </div>
    <script id="tutor_viewScores" type="text/template">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">学生毕业设计指导教师评审详细信息</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <strong>
                            <span>课题题目:</span>
                        </strong>
                        <span><%=data.pName%></span>
                        <hr>
                        <strong>
                            <span>学生姓名（学号）:</span>
                        </strong>
                        <span>
                            <%=data.name%>（<%=data.identifier%>）
                        </span>
                        <hr>
                        <%if(data.guidanceTeaGroup.hasReviewed) {%>
                        <strong>
                            <span>调查、论证</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreInnovate%></span>
                        <hr>
                        <strong>
                            <span>方案设计与技术路线</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreInnovate%></span>
                        <hr>
                        <strong>
                            <span>分析与解决问题的能力</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreInnovate%></span>
                        <hr>
                        <strong>
                            <span>工作量、工作态度</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreWorkload%></span>
                        <hr>
                        <strong>
                            <span>设计质量及设计说明书质量</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreInnovate%></span>
                        <hr>
                        <strong>
                            <span>创新</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreInnovate%></span>
                        <hr>
                        <strong>
                            <span>评审分数</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.scoreTotal%></span>
                        <hr>
                        <strong>
                            <span>评语</span>
                        </strong>
                        <span><%=data.guidanceTeaGroup.comment%></span>
                        <hr>
                        <strong>
                            <span>评审日期</span>
                        </strong>
                        <span><%
                                        var unixTimestamp = new Date( data.guidanceTeaGroup.reviewDate ) ;
                                        commonTime = unixTimestamp.toLocaleString();
                                        %>
                                        <%= commonTime %></span>
                        <hr>
                        <%} else{%>
                        <strong>
                            <span>评审分数</span>
                        </strong>
                        <span>暂无评审分数</span>
                        <hr>
                        <%}%>
                        <strong>
                            <span>附件</span>
                        </strong>
                        <span>
                            <% if(typeof(data.graduationProject)=="undefined" || data.graduationProject.docFileId == 0) { %>
                                        暂未上传毕业设计（论文）相关附件
                                        <% } else { %>
                                        <%=data.graduationProject.docFile.fileName %> <a style="padding-left: 20px"
                                                                                         href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.graduationProject.docFileId %>">点击下载</a>
                                        <% } %>
                        </span>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </script>
    <!--查看答辩打分详细信息结束-->
    <!--在线批注开题报告开始-->
    <div id="openingReport" class="page-wrapper displayNone">
    </div>
    <script id="openingReports" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            开题报告
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">开题报告详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交日期：<%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">课题研究的目的和意义</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.aim%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">课题研究方案和主要内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.content%>
                                    </textarea>
                                </div>

                                <div class="col-md-12">
                                    <h5 class="font_bold">研究方法及技术途径</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.tech%>
                                    </textarea>
                                </div>

                                <div class="col-md-12">
                                    <h5 class="font_bold">实施计划</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.plan%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">附件</h5>
                                </div>
                                <div class="col-md-12">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.fileId == 0 || typeof(data.file)=="undefined") { %>
                                        暂未上传开题报告相关附件
                                        <% } else { %>
                                        附件：<%=data.file.fileName %> <a style="padding-left: 20px"
                                                                       href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.fileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <%if(data.cStatus==2) {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control" style="width: 100%;"
                                              rows="4" id="annotationReport"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="suggestReport" class="form-control" style="width: 100%"
                                              rows="1"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <select id="statusReport" class="form-control">
                                        <option value="1">审核通过</option>
                                        <option value="0">审核不通过</option>
                                    </select>
                                </div>
                                <%}else {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4" readonly><%=data.annotation%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=data.cSuggest%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <% let cStatus;
                                    if(data.cStatus==1) {
                                    cStatus = "审核通过";
                                    }else {
                                    cStatus = "审核不通过";
                                    }
                                    %>
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=cStatus%></textarea>
                                </div>
                                <%}%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-2 padding0">
                                        <%if(data.cStatus==2) {%>
                                        <button onclick="reviewReport('<%=id%>','1')" type="button"
                                                class="management_student newPage btn btn-info">
                                            确定
                                        </button>
                                        <%}else {%>
                                        <button type="button" class="btn btn-info" disabled>
                                            确定
                                        </button>
                                        <%}%>
                                    </div>
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="returnStudent('openingReport')"
                                                class="btn btn-success ">
                                            取消
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注开题报告结束-->
    <!--在线批注中期检查开始-->
    <div id="Intermediate" class="page-wrapper displayNone">
    </div>
    <script id="Intermediates" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            中期检查
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">中期检查详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交日期：<%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.intro%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">附件</h5>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.fileId == 0 || typeof(data.file)=="undefined") { %>
                                        暂未上传开中期检查相关附件
                                        <% } else { %>
                                        附件：<%=data.file.fileName %> <a style="padding-left: 20px"
                                                                       href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.fileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <%if(data.cStatus==2) {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control" style="width: 100%;"
                                              rows="4" id="annotationIntermediate"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="suggestIntermediate" class="form-control" style="width: 100%"
                                              rows="1"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <select id="statusIntermediate" class="form-control">
                                        <option value="1">审核通过</option>
                                        <option value="0">审核不通过</option>
                                    </select>
                                </div>
                                <%}else {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4" readonly><%=data.annotation%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=data.cSuggest%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <% let cStatus;
                                    if(data.cStatus==1) {
                                    cStatus = "审核通过";
                                    }else {
                                    cStatus = "审核不通过";
                                    }
                                    %>
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=cStatus%></textarea>
                                </div>
                                <%}%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-2 padding0">
                                        <%if(data.cStatus==2) {%>
                                        <button onclick="reviewIntermediate('<%=id%>','2')" type="button"
                                                class="management_student newPage btn btn-info">
                                            确定
                                        </button>
                                        <%}else {%>
                                        <button type="button" class="btn btn-info" disabled>
                                            确定
                                        </button>
                                        <%}%>
                                    </div>
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="returnStudent('Intermediate')"
                                                class="btn btn-success ">
                                            取消
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注中期检查结束-->
    <!--在线批注指导记录开始-->
    <div id="GuideRecord" class="page-wrapper displayNone">
    </div>
    <script id="GuideRecords" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            指导记录
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">指导记录详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                    </div>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        提交时间
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        记录编号
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        审核状态
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <% let index=0;
                                data.forEach(function(guide){
                                index++; %>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div title="<%=title%>" class="col-md-3 textEllipsis textAlign">
                                        <%=title%>
                                    </div>
                                    <div class="col-md-3 textEllipsis textAlign">
                                        <%
                                        var unixTimestamp = new Date( guide.submitDate ) ;
                                        commonTime = unixTimestamp.toLocaleString();
                                        %>
                                        <%= commonTime %>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign">
                                        <%=index%>
                                    </div>
                                    <div class="col-md-3 textAlign textEllipsis">
                                        <%if(guide.cStatus==1){%>
                                        审核通过
                                        <%}else if(guide.cStatus==0) {%>
                                        审核不通过
                                        <%}else {%>
                                        等待指导教师审核
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textEllipsis textAlign">
                                        <button onclick="queryguideView('<%=id%>','<%=guide.id%>','query')"
                                                style="margin-bottom: 10px" type="button"
                                                class="management_guideView newPage btn btn-info btn-xs">
                                            查看
                                        </button>
                                        <%if(guide.cStatus==1||guide.cStatus==0) {%>
                                        <button style="margin-bottom: 10px" type="button"
                                                class="btn btn-info btn-xs" disabled>
                                            审核
                                        </button>
                                        <%}else{%>
                                        <button style="margin-bottom: 10px" type="button"
                                                onclick="queryguideView('<%=id%>','<%=guide.id%>','notQuery')"
                                                class="newPage btn btn-info btn-xs">
                                            审核
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <%})%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-11"></div>
                                    <div class="col-md-1">
                                        <button type="button" onclick="returnStudent('GuideRecord')"
                                                class="btn btn-success ">
                                            返回
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注指导记录结束-->
    <!--查看指导记录开始-->
    <div id="guideView" class="page-wrapper displayNone">
    </div>
    <script id="guideViews" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            指导记录
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">指导记录详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交时间：
                                            <%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">主题</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.theme%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">指导时间</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.date%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">主要工作</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.work%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">附件</h5>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.fileId == 0 || typeof(data.file)=="undefined") { %>
                                        暂未上传指导记录相关附件
                                        <% } else { %>
                                        附件：<%=data.file.fileName %> <a style="padding-left: 20px"
                                                                       href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.fileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <%if(isQuery=="notQuery") {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="annotationGuideView" class="form-control" style="width: 100%;"
                                              rows="4"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">指导记录审核</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="suggestGuideView" class="form-control" style="width: 100%"
                                              rows="1"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">指导记录审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <select id="statusGuideView" class="form-control">
                                        <option value="1">审核通过</option>
                                        <option value="0">审核不通过</option>
                                    </select>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-2 padding0">
                                        <button onclick="auditGuidanceRecords('<%=id%>','<%=data.id%>')" type="button"
                                                class="btn btn-info">
                                            确定
                                        </button>
                                    </div>
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="noneOrBlock('guideView', 'GuideRecord')"
                                                class="btn btn-success ">
                                            取消
                                        </button>
                                    </div>
                                </div>
                                <%}else {if(data.cStatus==0||data.cStatus==1) {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4"><%=data.annotation%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">指导记录审核意见</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%"
                                              rows="1"><%=data.cSuggest%></textarea>
                                </div>
                                <%}%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">指导记录审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <% let cStatus;
                                    if(data.cStatus==1) {
                                    cStatus = "审核通过";
                                    }else if(data.cStatus==0){
                                    cStatus = "审核不通过";
                                    }else {
                                    cStatus = "审核中";
                                    }
                                    %>
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=cStatus%></textarea>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="noneOrBlock('guideView', 'GuideRecord')"
                                                class="btn btn-success ">
                                            返回
                                        </button>
                                    </div>
                                </div>
                                <%}%>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--查看指导记录结束-->
    <!--在线批注外文译文和原文开始-->
    <div id="ForeignTranslation" class="page-wrapper displayNone">
    </div>
    <script id="ForeignTranslations" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            外文译文和原文
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">外文译文和原文详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交日期：<%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">外文译文内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.foreign%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">原文内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.original%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">外文译文附件</h5>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.forFileId == 0 || typeof(data.forFile)=="undefined") { %>
                                        暂未上传外文译文附件相关附件
                                        <% } else { %>
                                        附件：<%=data.forFile.fileName %> <a style="padding-left: 20px"
                                                                          href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.forFileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">原文附件</h5>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.oriFileId == 0 || typeof(data.oriFile)=="undefined") { %>
                                        原文附件
                                        <% } else { %>
                                        附件：<%=data.oriFile.fileName %> <a style="padding-left: 20px"
                                                                          href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.oriFileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <%if(data.cStatus==2) {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control" style="width: 100%;"
                                              rows="4" id="annotationForeignTranslation"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="suggestForeignTranslation" class="form-control" style="width: 100%"
                                              rows="1"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <select id="statusForeignTranslation" class="form-control">
                                        <option value="1">审核通过</option>
                                        <option value="0">审核不通过</option>
                                    </select>
                                </div>
                                <%}else {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4" readonly><%=data.annotation%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=data.cSuggest%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <% let cStatus;
                                    if(data.cStatus==1) {
                                    cStatus = "审核通过";
                                    }else {
                                    cStatus = "审核不通过";
                                    }
                                    %>
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=cStatus%></textarea>
                                </div>
                                <%}%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-2 padding0">
                                        <%if(data.cStatus==2) {%>
                                        <button onclick="reviewForeignTranslation('<%=id%>','3')" type="button"
                                                class="management_student newPage btn btn-info">
                                            确定
                                        </button>
                                        <%}else {%>
                                        <button type="button" class="btn btn-info" disabled>
                                            确定
                                        </button>
                                        <%}%>
                                    </div>
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="returnStudent('ForeignTranslation')"
                                                class="btn btn-success ">
                                            取消
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注外文译文和原文结束-->
    <!--在线批注文献综述开始-->
    <div id="LiteratureReview" class="page-wrapper displayNone">
    </div>
    <script id="LiteratureReviews" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            文献综述
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">文献综述详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交日期：<%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">文献综述内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.intro%>
                                    </textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">附件</h5>
                                </div>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="whiteColor" style="padding:10px;">
                                        <% if(data.fileId == 0 || typeof(data.file)=="undefined") { %>
                                        暂未上传文献综述相关附件
                                        <% } else { %>
                                        附件：<%=data.file.fileName %> <a style="padding-left: 20px"
                                                                       href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.fileId %>">点击下载</a>
                                        <% } %>
                                    </div>
                                </div>
                                <%if(data.cStatus==2) {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control" style="width: 100%;"
                                              rows="4" id="annotationLiteratureReview"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea id="suggestLiteratureReview" class="form-control" style="width: 100%"
                                              rows="1"></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">开题报告审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <select id="statusLiteratureReview" class="form-control">
                                        <option value="1">审核通过</option>
                                        <option value="0">审核不通过</option>
                                    </select>
                                </div>
                                <%}else {%>
                                <div class="col-md-12">
                                    <h5 class="font_bold">批注内容</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4" readonly><%=data.annotation%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核建议</h5>
                                </div>
                                <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=data.cSuggest%></textarea>
                                </div>
                                <div class="col-md-12">
                                    <h5 class="font_bold">中期检查审核结果</h5>
                                </div>
                                <div class="col-md-12">
                                    <% let cStatus;
                                    if(data.cStatus==1) {
                                    cStatus = "审核通过";
                                    }else {
                                    cStatus = "审核不通过";
                                    }
                                    %>
                                    <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1" readonly><%=cStatus%></textarea>
                                </div>
                                <%}%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-2 padding0">
                                        <%if(data.cStatus==2) {%>
                                        <button onclick="reviewLiteratureReview('<%=id%>','4')" type="button"
                                                class="btn btn-info">
                                            确定
                                        </button>
                                        <%}else {%>
                                        <button type="button" class="btn btn-info" disabled>
                                            确定
                                        </button>
                                        <%}%>
                                    </div>
                                    <div class="col-md-1 padding0">
                                        <button type="button" onclick="returnStudent('LiteratureReview')"
                                                class="btn btn-success ">
                                            取消
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注文献综述结束-->
    <!--在线批注毕业设计（论文）开始-->
    <div id="GraduationDesign" class="page-wrapper displayNone">
    </div>
    <script id="GraduationDesigns" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            毕业设计（论文）
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">毕业设计（论文）详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                    </div>
                                </div>
                                <div class="alert alert-success textEllipsis border_radius marginBottom0">
                                    <div class="col-md-3 textAlign">
                                        课题题目
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        提交时间
                                    </div>
                                    <div class="col-md-1 textAlign">
                                        记录编号
                                    </div>
                                    <div class="col-md-3 textAlign">
                                        审核状态
                                    </div>
                                    <div class="col-md-2 textAlign">
                                        操作
                                    </div>
                                </div>
                                <%data.forEach(function(student){
                                let index = 0;
                                index++;%>
                                <div class="alert alert-danger textEllipsis border_radius marginBottom0">
                                    <div title="<%=title%>" class="col-md-3 textEllipsis textAlign">
                                        <%=title%>
                                    </div>
                                    <div class="col-md-3 textEllipsis textAlign">
                                        <%
                                        var unixTimestamp = new Date( student.submitDate ) ;
                                        commonTime = unixTimestamp.toLocaleString();
                                        %>
                                        <%= commonTime %>
                                    </div>
                                    <div class="col-md-1 textEllipsis textAlign">
                                        <%=index%>
                                    </div>
                                    <div class="col-md-3 textAlign textEllipsis">
                                        <%if(student.cStatus==1){%>
                                        审核通过
                                        <%}else if(student.cStatus==0) {%>
                                        审核不通过
                                        <%}else {%>
                                        等待指导教师审核
                                        <%}%>
                                    </div>
                                    <div class="col-md-2 textEllipsis textAlign">
                                        <button style="margin-bottom: 10px" type="button"
                                                onclick="queryGraduationView('<%=id%>','<%=student.id%>','query')"
                                                class="btn btn-info btn-xs">
                                            查看
                                        </button>
                                        <%if(student.cStatus==1||student.cStatus==0) {%>
                                        <button style="margin-bottom: 10px" type="button"
                                                class="btn btn-info btn-xs" disabled>
                                            审核
                                        </button>
                                        <%} else{%>
                                        <button style="margin-bottom: 10px" type="button"
                                                onclick="queryGraduationView('<%=id%>','<%=student.id%>','notQuery')"
                                                class="btn btn-info btn-xs">
                                            审核
                                        </button>
                                        <%}%>
                                    </div>
                                </div>
                                <%})%>
                                <div class="col-md-12" style="margin-top: 10px">
                                    <div class="col-md-11"></div>
                                    <div class="col-md-1">
                                        <button type="button" onclick="returnStudent('GraduationDesign')"
                                                class="btn btn-success ">
                                            返回
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <!--在线批注毕业设计（论文）结束-->
    <!--查看毕业设计（论文）开始-->
    <div id="graduationView" class="page-wrapper displayNone">
    </div>
    <script id="graduationViews" type="text/template">
        <div style="margin: 0px" class="page-inner">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            毕业设计（论文）
                        </div>
                        <div class="panel-body">
                            <div style="padding-left:0px;padding-bottom: 15px" class="col-md-12">
                                <div style="padding-left: 0px" class="col-md-4">
                                    <h4 class="font_bold">毕业设计（论文）详情</h4>
                                </div>
                            </div>
                            <div class="col-md-12 openingReport">
                                <div class="col-md-12">
                                    <div class="alert alert-info textEllipsis" style="padding:10px;">
                                        <div>姓名：<%=name%></div>
                                        <div>学号：<%=id%></div>
                                        <div>题目：<%=title%></div>
                                        <div>提交时间：
                                            <%
                                            var unixTimestamp = new Date( data.submitDate ) ;
                                            commonTime = unixTimestamp.toLocaleString();
                                            %>
                                            <%= commonTime %>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">关键词</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="2" readonly><%=data.keywords%>
                                    </textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">创新点</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="5" readonly><%=data.innovatePoint%>
                                    </textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">中文摘要</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.cnSummary%>
                                    </textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">英文摘要</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="10" readonly><%=data.enSummary%>
                                    </textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">其他</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="6" readonly><%=data.other%>
                                    </textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">论文文档</h5>
                                    </div>
                                    <div class="col-md-12" style="margin-top: 10px">
                                        <div class="whiteColor" style="padding:10px;">
                                            <% if(data.docFileId == 0||typeof(data.docFile)=="undefined") { %>
                                            暂未上传毕业设计论文
                                            <% } else { %>
                                            附件：<%=data.docFile.fileName %> <a style="padding-left: 20px"
                                                                              href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.docFileId %>">点击下载</a>
                                            <% } %>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">附件</h5>
                                    </div>
                                    <div class="col-md-12" style="margin-top: 10px">
                                        <div class="whiteColor" style="padding:10px;">
                                            <% if(data.fileId == 0||typeof(data.file)=="undefined") { %>
                                            暂未上传毕业设计相关附件
                                            <% } else { %>
                                            附件：<%=data.file.fileName %> <a style="padding-left: 20px"
                                                                           href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data.fileId %>">点击下载</a>
                                            <% } %>
                                        </div>
                                    </div>
                                    <%if(query=="notQuery") {%>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">批注内容</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea id="annotationGraduation" class="form-control" style="width: 100%;"
                                              rows="4"></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">毕业设计（论文）审核</h5>
                                    </div>
                                    <div class="col-md-12">
                                        <textarea id="suggestGraduation" class="form-control" style="width: 100%"
                                                  rows="1"></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">毕业设计（论文）审核结果</h5>
                                    </div>
                                    <div class="col-md-12">
                                        <select id="statusGraduation" class="form-control">
                                            <option value="1">审核通过</option>
                                            <option value="0">审核不通过</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12" style="margin-top: 10px">
                                        <div class="col-md-2 padding0">
                                            <button onclick="auditGraduationDesign('<%=id%>','<%=data.id%>')"
                                                    type="button"
                                                    class="btn btn-info">
                                                确定
                                            </button>
                                        </div>
                                        <div class="col-md-1 padding0">
                                            <button type="button"
                                                    onclick="noneOrBlock('graduationView', 'GraduationDesign')"
                                                    class="btn btn-success ">
                                                取消
                                            </button>
                                        </div>
                                    </div>
                                    <%}else{
                                    if(data.cStatus==1||data.cStatus==0){
                                    %>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">批注内容</h5>
                                    </div>
                                    <div class="col-md-12">
                                    <textarea class="form-control readOnlyStyle" style="width: 100%;"
                                              rows="4" readonly><%=data.annotation%></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">毕业设计（论文）审核</h5>
                                    </div>
                                    <div class="col-md-12">
                                        <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1"
                                                  readonly><%=data.cSuggest%></textarea>
                                    </div>
                                    <%}%>
                                    <div class="col-md-12">
                                        <h5 class="font_bold">毕业设计（论文）审核结果</h5>
                                    </div>
                                    <div class="col-md-12">
                                        <% let cStatus;
                                        if(data.cStatus==1) {
                                        cStatus = "审核通过";
                                        }else if(data.cStatus==0){
                                        cStatus = "审核不通过";
                                        }else {
                                        cStatus = "审核中";
                                        }
                                        %>
                                        <textarea class="form-control readOnlyStyle" style="width: 100%" rows="1"
                                                  readonly><%=cStatus%></textarea>
                                    </div>
                                    <div class="col-md-12" style="margin-top: 10px">
                                        <div class="col-md-1 padding0">
                                            <button type="button"
                                                    onclick="noneOrBlock('graduationView', 'GraduationDesign')"
                                                    class="btn btn-success ">
                                                返回
                                            </button>
                                        </div>
                                    </div>
                                    <%}%>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </script>
    <!--查看毕业设计（论文）结束-->
    <!--学生管理结束-->

    <!--查看学生详细信息开始-->
    <div class="modal fade" id="studentDetails" role="dialog">
    </div>
    <script id="studentDetailses" type="text/template">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">学生详细信息</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <strong>
                            <span>学生姓名:</span>
                        </strong>
                        <span><%=name%></span>
                        <hr>
                        <strong>
                            <span>学号:</span>
                        </strong>
                        <span><%=identifier%></span>
                        <hr>
                        <strong>
                            <span>院:</span>
                        </strong>
                        <span><%=college%></span>
                        <hr>
                        <strong>
                            <span>系:</span>
                        </strong>
                        <span><%=department%></span>
                        <hr>
                        <strong>
                            <span>专业:</span>
                        </strong>
                        <span><%=major%></span>
                        <hr>
                        <strong>
                            <span>班级:</span>
                        </strong>
                        <span><%=grade%>级 - <%=classNo%>班</span>
                        <hr>
                        <strong>
                            <span>性别:</span>
                        </strong>
                        <span><%=sex%></span>
                        <hr>
                        <strong>
                            <span>联系电话:</span>
                        </strong>
                        <span>
                            <%if(contactTel=="") {%>
                            暂未填写联系电话
                            <%}else {%>
                            <%=contactTel%>
                            <%}%>
                        </span>
                        <hr>
                        <strong>
                            <span>联系邮箱:</span>
                        </strong>
                        <span>
                            <%if(email=="") {%>
                            暂未填写联系邮箱
                            <%}else {%>
                            <%=email%>
                            <%}%></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </script>
    <!--查看学生详细信息结束-->
    <!--教师详细信息开始 -->
    <div class="modal fade" id="teacherDetails" role="dialog">
    </div>
    <script id="teacherDetailses" type="text/template">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">教师详细信息</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <strong>
                            <span>教师（工号）:</span>
                        </strong>
                        <span>
                            <%=name%>（<%=identifier%>）
                        </span>
                        <hr>
                        <strong>
                            <span>教师职称:</span>
                        </strong>
                        <span><%=title%></span>
                        <hr>
                        <strong>
                            <span>性别:</span>
                        </strong>
                        <span><%=sex%></span>
                        <hr>
                        <strong>
                            <span>教师联系邮箱:</span>
                        </strong>
                        <span>
                            <%if(email=="") {%>
                                暂未填写联系邮箱
                            <%}else {%>
                            <%=email%>
                            <%}%>
                        </span>
                        <hr>
                        <strong>
                            <span>教师联系电话:</span>
                        </strong>
                        <span>
                            <%if(contactTel=="") {%>
                                暂未填写联系电话
                            <%}else {%>
                            <%=contactTel%>
                            <%}%>
                        </span>
                        <hr>
                        <strong>
                            <span>学院:</span>
                        </strong>
                        <span><%=college%></span>
                        <hr>
                        <strong>
                            <span>系:</span>
                        </strong>
                        <span><%=department%></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </script>
    <!--教师详细信息结束 -->
    <!--查看已出课题详细信息开始-->
    <div style="overflow-y:scroll" class="modal fade" id="topicDetails" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">已出课题详细信息</h4>
                </div>
                <div class="modal-body" id="titleInformation">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-info" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <script id="titleInformations" type="text/template">
        <div class="alert alert-success">
            <strong>
                <span>课题题目:</span>
            </strong>
            <span><%=data[0].project.title%></span>
            <hr>
            <strong>
                <span>题目简介:</span>
            </strong>
            <span>
                   <%=data[0].project.briefIntro%>
            </span>
            <hr>
            <strong>
                <span>题目来源:</span>
            </strong>
            <span><%=data[0].project.source%></span>
            <hr>
            <strong>
                <span>题目类型:</span>
            </strong>
            <span><%=data[0].project.genre%></span>
            <hr>
            <strong>
                <span>出题时间:</span>
            </strong>
            <span><%
                    var unixTimestamp = new Date( data[0].setDate ) ;
                    commonTime = unixTimestamp.toLocaleString();
                     %>
                     <%= commonTime %></span>
            <hr>
            <strong>
                <span>可选人数/容纳人数:</span>
            </strong>
            <span><%=data[0].project.rest%>/<%=data[0].project.number%></span>
            <hr>
            <strong>
                <span>选题范围:</span>
            </strong>
            <span><%=data[0].project.range%></span>
            <hr>
            <strong>
                <span>任务书:</span>
            </strong>
            <span>
                <% if(typeof(data[0].project.taskBook)=="undefined"||data[0].project.taskBook.fileId==0 || typeof(data[0].project.taskBook.file)=="undefined") {%>
                                        暂未上传任务书
                                        <%} else {%>
                                        <a
                                                href="http://www.yuanbw.cn:20086/gpms/rol/downloadFile?fileId=<%=data[0].project.taskBook.fileId %>"><%=data[0].project.taskBook.file.fileName%></a>
                                        <%}%>
            </span>
            <hr>
            <strong>
                <span>审核状态:</span>
            </strong>
            <span>
                <% let msg;
                                        if(data[0].cStatus==0) {
                                        msg = "审核不通过";
                                        }
                                        else if(data[0].cStatus==1) {
                                        msg = "审核通过";
                                        }
                                        else {
                                        msg = "审核中";
                                        }
                                        %>
                                        <%=msg%>
            </span>
            <hr>
            <strong>
                <span>审核意见:</span>
            </strong>
            <span><%=data[0].cSuggest%></span>
        </div>
    </script>
    <!--查看已出课题详细信息结束-->


    <!--新闻浏览-->
    <div id="new" class="commmon news displayNone" style="height: 100%">
    </div>
    <script>
        $("#new").load("../commonHtml/news.html");
    </script>


    <!--历届优秀浏览开始-->
    <div id="pastExcellent" class="commmon good displayNone" style="height: 100%">
    </div>
    <script>
        $("#pastExcellent").load("../commonHtml/pastExcellent.html");
    </script>
    <!--历届优秀浏览结束-->

    <!--通知-->
    <div id="announcements" class="commmonTop messageNotice displayNone" style="height: 100%">
    </div>
    <script>
        $("#announcements").load("../commonHtml/announcements.html");
    </script>

    <!--公告-->
    <div id="ProclamationNotice" class="commmonTop messageNotice displayNone" style="height: 100%">
    </div>
    <script>
        $("#ProclamationNotice").load("../commonHtml/proclamation.html");
    </script>

    <!--个人信息-->
    <div id="personInfo" class="commmonTop personal displayNone" style="height: 100%">
    </div>
    <script>
        $("#personInfo").load("../commonHtml/personal.html");
    </script>

    <!--退出登录-->
    <div id="login" class="bounced displayNone">
    </div>
    <script>
        $("#login").load("../commonHtml/logOut.html");
    </script>

    <!--修改密码-->
    <div id="changePassword" class="commmonTop passwordChange displayNone" style="height: 100%">
    </div>
    <script>
        $("#changePassword").load("../commonHtml/changePassword.html");
    </script>
</div>

</div>
<!--jquery.pagination.js-->
<script src="../assets/js/jquery.pagination.js"></script>
<!-- Bootstrap Js -->
<script src="../assets/js/bootstrap.js"></script>
<script src="../assets/js/sideCloseOpen.js"></script>
<!-- 自定义函数 Js -->
<script src="../assets/js/commonFunction.js"></script>
<!--圆形进度条-->
<!-- easypiechart-data Js -->
<script src="../assets/js/easypiechart-data.js"></script>
<!-- easypiechart Js -->
<script src="../assets/js/easypiechart.js"></script>
<script src="../assets/js/ejs.js"></script>

<script>
    let token = getCookie("token");
    let authority = getCookie("authority");
    if (token == "" || token == null || authority != 2) {
        window.location.href = "../login/login.html";
    }

    $("#noticeAnnouncement").hover(function(){
        UnReadNotifications();
        showUnReadNotices();
        unRead()
    },function(){
    });

    window.onload=function (){
        unRead();
    }

    $(function () {
        CheckOutProject();
        PersonalInfo();
    });

    let teacherInfo = "";

    function PersonalInfo() {
        let url = "http://www.yuanbw.cn:20086/gpms/rol/showRoleInfo";
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    let html = responseStr.data.name + '(' + responseStr.data.identifier + ')，欢迎使用系统';
                    $('#information').html(html);
                    teacherInfo = responseStr.data.identifier;
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    let html = "暂无数据";
                    $('#information').html(html);
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

</script>


<script>
    //取消上传题目
    function Unupload(classOne, classOther, textContent) {
        returnFirst(classOne, classOther);
        cancelTitle(textContent);
    }

    //查看已出课题
    let projects = [];
    let projectId;

    function ProjectConditions(id, title, rangeType, genre, source, cStatus) {
        let data = {limit: 500};
        if (id != "") {
            data.id = id;
        }
        if (title != "") {
            data.title = title;
        }
        if (rangeType != "") {
            data.rangeType = rangeType;
        }
        if (genre != "") {
            data.genre = genre;
        }
        if (source != "") {
            data.source = source;
        }
        if (cStatus != "") {
            data.cStatus = cStatus;
        }
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showAllProSets";
        $.ajax({
            url: url,
            type: "POST",
            data: data,
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    if (id == "") {
                        let view_Subjects = document.getElementById('view_Subjects').innerHTML;
                        let view_Subject = document.getElementById('view_Subject');
                        projects = responseStr.data.proSetList;
                        view_Subject.innerHTML = ejs.render(view_Subjects, {data: projects});
                    } else {
                        projectId = responseStr.data.proSetList;
                        let titleInformations = document.getElementById('titleInformations').innerHTML;
                        let titleInformation = document.getElementById('titleInformation');
                        titleInformation.innerHTML = ejs.render(titleInformations, {data: projectId});
                        let upload_Titles = document.getElementById('upload_Titles').innerHTML;
                        let upload_Title = document.getElementById('upload_Title');
                        upload_Title.innerHTML = ejs.render(upload_Titles, {data: projectId});
                    }
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    let view_Subjects = document.getElementById('view_Subjects').innerHTML;
                    let view_Subject = document.getElementById('view_Subject');
                    view_Subject.innerHTML = ejs.render(view_Subjects, {data: ""});
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //条件查询已出课题
    function conditionQuery() {
        let title = document.getElementById('title').value;
        let rangeType = document.getElementById('rangeType').value;
        let genre = document.getElementById('genre').value;
        let source = document.getElementById('source').value;
        let cStatus = document.getElementById('cStatus').value;
        ProjectConditions("", title, rangeType, genre, source, cStatus);
    }

    function CheckOutProject() {
        ProjectConditions("", "", "", "", "", "");
    }

    //根据id查询已出课题信息
    function queryTopicDetails(id) {
        ProjectConditions(id, "", "", "", "", "");
    }

    //修改课题信息
    function modifyTopic(id) {
        returnFirst('classOther', 'classOne');
        ProjectConditions(id, "", "", "", "", "");
    }

    //删除课题
    let topicId;

    function deleteTopicId(id) {
        topicId = id;
    }

    //确认删除课题
    function deleteTopic() {
        let miss = document.getElementById('deleteMiss');
        miss.click();
        let url = "http://www.yuanbw.cn:20086/gpms/tea/deleteProject";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                pid: topicId
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                CheckOutProject();
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //确认上传题目
    function titleUpload(First, id, cStatus) {
        let formdata = new FormData($('#upload_TitleForm')[0]);
        let url;
        if (First == "isFirst") {
            let titleSource = document.getElementById('titleSource').value;
            let titleType = document.getElementById('titleType').value;
            let numberOptional = document.getElementById('numberOptional').value;
            let optionalProfessional = document.getElementById('optionalProfessional').value;
            formdata.append("source", titleSource);
            formdata.append("genre", titleType);
            formdata.append("number", numberOptional);
            formdata.append("rangeType", optionalProfessional);
            url = "http://www.yuanbw.cn:20086/gpms/tea/issueProject";
        } else {
            if (cStatus != 1) {
                let titleSource = document.getElementById('titleSource').value;
                let titleType = document.getElementById('titleType').value;
                let numberOptional = document.getElementById('numberOptional').value;
                let optionalProfessional = document.getElementById('optionalProfessional').value;
                formdata.append("source", titleSource);
                formdata.append("genre", titleType);
                formdata.append("number", numberOptional);
                formdata.append("rangeType", optionalProfessional);
            }
            formdata.append("id", id);
            url = "http://www.yuanbw.cn:20086/gpms/tea/modifyProject";
        }
        $.ajax({
            url: url,
            type: "POST",
            data: formdata,
            cache: false,
            processData: false,
            contentType: false,
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                returnFirst('classOne', 'classOther');
                cancelTitle('UploadInput');
                CheckOutProject();
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //点击上传题目
    function uploadTitles() {
        let upload_Titles = document.getElementById('upload_Titles').innerHTML;
        let upload_Title = document.getElementById('upload_Title');
        upload_Title.innerHTML = ejs.render(upload_Titles, {data: ""});
    }

    //查询学生选题
    let pageCount = 1;

    function queryStudentTopics(sid, sName, pid, pName, cStatus) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showProChooses";
        let limit = 4;
        let offset = 0;
        let data = {limit: limit, offset: offset};
        if (sid != "") {
            data.sid = sid;
        }
        if (sName != "") {
            data.sName = sName;
        }
        if (pid != "") {
            data.pid = pid;
        }
        if (pName != "") {
            data.pName = pName;
        }
        if (cStatus != "") {
            data.cStatus = cStatus;
        }
        $.ajax({
            url: url,
            type: "POST",
            data: data,
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    if (sid != "") {
                        let studentDetailses = document.getElementById('studentDetailses').innerHTML;
                        let studentDetails = document.getElementById('studentDetails');
                        let student = responseStr.data.chooseList[0].student;
                        studentDetails.innerHTML = ejs.render(studentDetailses, {
                            name: student.name,
                            identifier: student.identifier,
                            college: student.college,
                            department: student.department,
                            major: student.major,
                            grade: student.grade,
                            classNo: student.classNo,
                            sex: student.sex,
                            contactTel: student.contactTel,
                            email: student.email
                        });
                    } else {
                        let audit_Students_Topicses = document.getElementById('audit_Students_Topicses').innerHTML;
                        let audit_Students_Topic = document.getElementById('audit_Students_Topic');
                        pageCount = Math.ceil(responseStr.data.count / limit);
                        audit_Students_Topic.innerHTML = ejs.render(audit_Students_Topicses, {data: responseStr.data.chooseList});
                        $('#studentsPage').pagination({
                            pageCount: pageCount,
                            jump: true,
                            coping: true,
                            homePage: '首页',
                            endPage: '末页',
                            prevContent: '上页',
                            nextContent: '下页',
                            callback: function (api) {
                                let page = api.getCurrent();
                                offset = (page - 1) * limit;
                                data.offset = offset;
                                $.ajax({
                                    url: url,
                                    type: "POST",
                                    data: data,
                                    xhrFields: {
                                        withCredentials: true
                                    },
                                    crossDomain: true,
                                    headers: {
                                        Token: token
                                    },
                                    success: function (responseStr) {
                                        let msg = responseStr.msg;
                                        if (responseStr.statusCode == "100") {
                                            pageCount = Math.ceil(responseStr.data.count / limit);
                                            if (responseStr.data.chooseList.length > 0) {
                                                audit_Students_Topic.innerHTML = ejs.render(audit_Students_Topicses, {data: responseStr.data.chooseList});
                                            }
                                        }
                                        if (msg == "系统繁忙") {
                                            alert("系统繁忙,请不要点击过快！");
                                        }
                                    },
                                    error: function (responseStr) {
                                        window.location.href = "../404/404.html";
                                    }
                                });
                            }
                        });
                    }
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    let audit_Students_Topicses = document.getElementById('audit_Students_Topicses').innerHTML;
                    let audit_Students_Topic = document.getElementById('audit_Students_Topic')
                    audit_Students_Topic.innerHTML = ejs.render(audit_Students_Topicses, {data: ""});
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    function Students_Topics() {
        queryStudentTopics("", "", "", "", "");
    }

    //传入学生id查询学生信息
    function studentId(id) {
        queryStudentTopics(id, "", "", "", "");
    }

    //根据条件查询学生选题
    function selectedTopicQuery() {
        let sName = document.getElementById('sName');
        let sid = document.getElementById('sid');
        let pName = document.getElementById('pName');
        let cStatus = document.getElementById('scStatus');
        let sNameValue = sName.value;
        let sidValue = sid.value;
        let pNameValue = pName.value;
        let cStatusValue = cStatus.value;
        queryStudentTopics("", sNameValue, sidValue, pNameValue, cStatusValue);
        sName.value = "";
        sid.value = "";
        pName.value = "";
        cStatus.options[0].selected = true;
    }

    //审核学生选题传入id
    let incomingStudent;
    let StudentProjectId;

    function incomingStudentId(id, project) {
        incomingStudent = id;
        StudentProjectId = project;
    }

    //通过学生选题
    function passStudentTopic() {
        let miss = document.getElementById('passStudent');
        miss.click();
        isPassTopic(incomingStudent, StudentProjectId, "2");
    }

    //不通过学生选题
    function noPassStudentTopic() {
        let miss = document.getElementById('noPassTopic');
        miss.click();
        isPassTopic(incomingStudent, StudentProjectId, "0");
    }

    //是否通过学生选题后台连接
    function isPassTopic(sid, pid, status) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/reviewProChoose";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: sid,
                pid: pid,
                status: status
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                Students_Topics();
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看教师答辩安排
    function viewReply() {
        let answerTeacher;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefPlan";
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    answerTeacher = responseStr.data.teaGroup;
                    answerTeacher.forEach(function (teacher) {
                        if (teacher.leader) {
                            if (teacherInfo == teacher.teaAuth.id) {
                                $('#DefenseLeader').addClass('displayBlock');
                            }
                        }
                    })
                    queryStudentplea(responseStr.data);
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    queryStudentplea('');
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查询答辩学生
    let students;

    //查看学生答辩安排
    function queryStudentplea(teachers) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefStudents";
        let reply_arrange_selfs = document.getElementById('reply_arrange_selfs').innerHTML;
        let reply_arrange_self = document.getElementById('reply_arrange_self');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                limit: "20"
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    students = responseStr.data.studentList;
                    reply_arrange_self.innerHTML = ejs.render(reply_arrange_selfs, {
                        data: teachers,
                        students: responseStr.data.studentList
                    });
                }  else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }else {
                    reply_arrange_self.innerHTML = ejs.render(reply_arrange_selfs, {
                        data: teachers,
                        students: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查询答辩教师
    function queryTeacherPlea(id) {
        let teachers;
        let teacherDetailses = document.getElementById('teacherDetailses').innerHTML;
        let teacherDetails = document.getElementById('teacherDetails');
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefTeachers";
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.statusCode == "100") {
                    teachers = responseStr.data;
                    teachers.forEach(function (teacher) {
                        if (teacher.identifier == id) {
                            teacherDetails.innerHTML = ejs.render(teacherDetailses, {
                                name: teacher.name,
                                identifier: teacher.identifier,
                                title: teacher.title,
                                sex: teacher.sex,
                                email: teacher.email,
                                contactTel: teacher.contactTel,
                                college: teacher.college,
                                department: teacher.department,
                            });
                        }
                    })
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看答辩学生
    function studentPleaId(id) {
        students.forEach(function (student) {
            if (student.identifier == id) {
                let studentDetailses = document.getElementById('studentDetailses').innerHTML;
                let studentDetails = document.getElementById('studentDetails');
                studentDetails.innerHTML = ejs.render(studentDetailses, {
                    name: student.name,
                    identifier: student.identifier,
                    college: student.college,
                    department: student.department,
                    major: student.major,
                    grade: student.grade,
                    classNo: student.classNo,
                    sex: student.sex,
                    contactTel: student.contactTel,
                    email: student.email
                });
            }
        })
    }

    //答辩打分
    function DefenseRating() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefStudents";
        let defense_ratinges = document.getElementById('defense_ratinges').innerHTML;
        let defense_rating = document.getElementById('defense_rating');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                limit: "20"
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    defense_rating.innerHTML = ejs.render(defense_ratinges, {
                        data: responseStr.data.studentList
                    });
                } else if (responseStr.msg == "查询结果为空") {
                    defense_rating.innerHTML = ejs.render(defense_ratinges, {
                        data: ""
                    });
                } else {
                    alert(responseStr.msg + "，请稍后重试！");
                    returnFirst('queryArrange', 'RatingArrange');
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看学生答辩分数详情
    function ViewPleaScore(id) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefStudents";
        let defenseScores = document.getElementById('defenseScores').innerHTML;
        let defenseScore = document.getElementById('defenseScore');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                limit: "20"
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    defenseScore.innerHTML = ejs.render(defenseScores, {
                        data: responseStr.data.studentList
                    });
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }else {
                    defenseScore.innerHTML = ejs.render(defenseScores, {
                        data: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //传入学生id显示打分页面
    function DefenseRatingId(pName, name, identifier, teacherName) {
        let scores = document.getElementById('scores').innerHTML;
        let score = document.getElementById('score');
        score.innerHTML = ejs.render(scores, {
            pName: pName,
            name: name,
            identifier: identifier,
            teacherName: teacherName
        });
        $('#three').removeClass('displayBlock');
        $('#three').addClass('displayNone');
        $('#score').addClass('displayBlock');
        $('#score').removeClass('displayNone');
    }

    //确定答辩打分
    function DetermineDefenseScore(id) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/scoringDefence";
        let reportingProcess = document.getElementById('reportingProcess').value;
        let scoreReport = document.getElementById('reportingContent').value;
        let scoreWorth = document.getElementById('applicableValue').value;
        let scoreDefence = document.getElementById('plea').value;
        let comment = document.getElementById('comment').value;
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                scoreProcess: reportingProcess,
                scoreReport: scoreReport,
                scoreWorth: scoreWorth,
                scoreDefence: scoreDefence,
                comment: comment
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                DefenseRating();
                $('#score').removeClass('displayBlock');
                $('#score').addClass('displayNone');
                $('#three').addClass('displayBlock');
                $('#three').removeClass('displayNone');
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //答辩组长查看组内答辩打分
    function queryDefenseScore() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showDefStudentsAndScores";
        let defense_Situations = document.getElementById('defense_Situations').innerHTML;
        let defense_Situation = document.getElementById('defense_Situation');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                limit: 20
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    let PleaTeachers = "";
                    responseStr.data.studentList.forEach(function (plea) {
                        if (typeof (plea.defenceScore) != "undefined") {
                            PleaTeachers = plea.defenceScore.defScoreList;
                            return;
                        }
                    })
                    defense_Situation.innerHTML = ejs.render(defense_Situations, {
                        teachers: PleaTeachers,
                        data: responseStr.data.studentList
                    });
                } else if (responseStr.msg == "查询结果为空") {
                    defense_Situation.innerHTML = ejs.render(defense_Situations, {
                        data: ""
                    });
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    alert(responseStr.msg + "，请稍后重试！");
                    returnFirst('queryArrange', 'leaderDefense');
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //答辩组长提交组内答辩打分
    function submitScoreGroup() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/commitDefence";
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                queryDefenseScore();
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //教师查看毕业评审学生列表
    let GraduationDesignStudents;

    function queryGraduationDesignReview() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showMtStudentList";
        let grade_Paperses = document.getElementById('grade_Paperses').innerHTML;
        let grade_Papers = document.getElementById('grade_Papers');
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    GraduationDesignStudents = responseStr.data;
                    grade_Papers.innerHTML = ejs.render(grade_Paperses, {
                        data: responseStr.data
                    });
                } else if (responseStr.msg == "查询记录为空") {
                    grade_Papers.innerHTML = ejs.render(grade_Paperses, {
                        data: ""
                    });
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    alert(responseStr.msg + "，请稍后重试！");
                    returnFirst('queryArrange', 'graduationDesign');
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //传入id查看毕业设计评审
    let EssayScoresId;

    function ViewEssayScores(id) {
        EssayScoresId = id;
        let viewScores = document.getElementById('viewScores').innerHTML;
        let viewScore = document.getElementById('viewScore');
        GraduationDesignStudents.forEach(function (student) {
            if (student.identifier == id) {
                console.log(student)
                viewScore.innerHTML = ejs.render(viewScores, {
                    data: student
                });
            }
        })
    }

    //答辩教师毕业评审
    function scorePleaStudents(pName, name, identifier, teacherName) {
        $('#three').removeClass('displayBlock');
        $('#three').addClass('displayNone');
        $('#scorePlea').addClass('displayBlock');
        $('#scorePlea').removeClass('displayNone');
        let scorePleas = document.getElementById('scorePleas').innerHTML;
        let scorePlea = document.getElementById('scorePlea');
        scorePlea.innerHTML = ejs.render(scorePleas, {
            pName: pName,
            name: name,
            identifier: identifier,
            teacherName: teacherName
        });
    }

    //确认提交毕业评审
    function SubmitGraduationEvaluation(id) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/markingMtDoc";
        let scoreLiterature = document.getElementById('reviewTranslation').value;
        let scoreInstruction = document.getElementById('designQuality').value;
        let scoreWorkload = document.getElementById('workloadDifficulty').value;
        let scoreInnovate = document.getElementById('innovation').value;
        let comment = document.getElementById('commentGraduation').value;
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                scoreLiterature: scoreLiterature,
                scoreInstruction: scoreInstruction,
                scoreWorkload: scoreWorkload,
                scoreInnovate: scoreInnovate,
                comment: comment
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                queryGraduationDesignReview();
                $('#scorePlea').removeClass('displayBlock');
                $('#scorePlea').addClass('displayNone');
                $('#three').addClass('displayBlock');
                $('#three').removeClass('displayNone');
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //学生管理指导教师查看学生列表
    function studentList() {
        studentInfo("", "", 'send_Ntifications', 'send_Ntification');
    }

    function studentInfo(id, name, htmlDom, normalDom) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showTeaStudentDefInfos";
        let htmlDom1 = document.getElementById(htmlDom).innerHTML;
        let normalDom1 = document.getElementById(normalDom);
        let data = {};
        if (id != "") {
            data.id = id;
        }
        if (name != "") {
            data.name = name;
        }
        $.ajax({
            url: url,
            type: "POST",
            data: data,
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    normalDom1.innerHTML = ejs.render(htmlDom1, {
                        data: responseStr.data
                    });
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    normalDom1.innerHTML = ejs.render(htmlDom1, {
                        data: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看指导学生答辩安排
    function studentReply() {
        let studentIds = document.getElementById('studentIds').value;
        let studentName = document.getElementById('studentName').value;
        studentInfo(studentIds, studentName, "students_Replys", "students_Reply");
        document.getElementById('studentIds').value = "";
        document.getElementById('studentName').value = "";
    }

    //指导教师毕业设计评审
    let grade_Papers_Students;

    function grade_Papers() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showGtStudentList";
        let tutor_grade_Paperses = document.getElementById('tutor_grade_Paperses').innerHTML;
        let tutor_grade_Papers = document.getElementById('tutor_grade_Papers');
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    grade_Papers_Students = responseStr.data;
                    tutor_grade_Papers.innerHTML = ejs.render(tutor_grade_Paperses, {
                        data: responseStr.data
                    });
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }  else {
                    tutor_grade_Papers.innerHTML = ejs.render(tutor_grade_Paperses, {
                        data: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //指导教师通过id查看学生毕业评审的详细信息
    function viewScoreId(id) {
        let tutor_viewScores = document.getElementById('tutor_viewScores').innerHTML;
        let tutor_viewScore = document.getElementById('tutor_viewScore');
        grade_Papers_Students.forEach(function (student) {
            if (student.identifier == id) {
                tutor_viewScore.innerHTML = ejs.render(tutor_viewScores, {
                    data: student
                });
            }
        })
    }

    //指导教师评审论文
    function tutor_scorePleaOfStudent(id) {
        let tutor_scorePleas = document.getElementById('tutor_scorePleas').innerHTML;
        let tutor_scorePlea = document.getElementById('tutor_scorePlea');
        $('#student').removeClass('displayBlock');
        $('#student').addClass('displayNone');
        $('#tutor_scorePlea').addClass('displayBlock');
        $('#tutor_scorePlea').removeClass('displayNone');
        grade_Papers_Students.forEach(function (student) {
            if (student.identifier == id) {
                tutor_scorePlea.innerHTML = ejs.render(tutor_scorePleas, {
                    data: student
                });
            }
        })
    }

    //指导教师查看指导学生材料
    function queryMaterial() {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showGuideStuDocProcessList";
        let review_Materials = document.getElementById('review_Materials').innerHTML;
        let review_Material = document.getElementById('review_Material');
        $.ajax({
            url: url,
            type: "POST",
            data: {},
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    review_Material.innerHTML = ejs.render(review_Materials, {
                        data: responseStr.data
                    });
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }  else {
                    review_Material.innerHTML = ejs.render(review_Materials, {
                        data: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看过程报告
    function showStudentDocument(id, documentId, documentations, documentation, name, title) {
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showStudentDocument";
        let documentsDoc = document.getElementById(documentations).innerHTML;
        let documentDoc = document.getElementById(documentation);
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                docType: documentId
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    noneOrBlock('student', documentation);
                    documentDoc.innerHTML = ejs.render(documentsDoc, {
                        data: responseStr.data,
                        name: name,
                        title: title,
                        id: id
                    });
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }  else if (responseStr.msg == "查询结果为空") {
                    alert("该学生尚未提交材料，暂不能审核！");
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看开题报告
    function openingReportDocument(id, documentId, name, title) {
        showStudentDocument(id, documentId, 'openingReports', 'openingReport', name, title);
    }

    //查看中期检查
    function IntermediateDocument(id, documentId, name, title) {
        showStudentDocument(id, documentId, 'Intermediates', 'Intermediate', name, title);
    }

    //查看外文译文和原文
    function ForeignTranslationDocument(id, documentId, name, title) {
        showStudentDocument(id, documentId, 'ForeignTranslations', 'ForeignTranslation', name, title);
    }

    //查看文献综述
    function LiteratureReviewDocument(id, documentId, name, title) {
        showStudentDocument(id, documentId, 'LiteratureReviews', 'LiteratureReview', name, title)
    }

    //查看指导记录
    let guides;
    let Stuname;
    let Stutitle;

    function queryGuideRecord(id, name, title) {
        Stuname = name;
        Stutitle = title;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showStuGuidanceRecords";
        let GuideRecords = document.getElementById('GuideRecords').innerHTML;
        let GuideRecord = document.getElementById('GuideRecord');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    noneOrBlock('student', 'GuideRecord');
                    guides = responseStr.data;
                    GuideRecord.innerHTML = ejs.render(GuideRecords, {
                        data: responseStr.data,
                        name: name,
                        title: title,
                        id: id
                    });
                }else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                }  else if (responseStr.statusCode == "101") {
                    alert("该学生尚未提交材料，暂不能审核！");
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看具体的指导记录
    function queryguideView(id, guideId, query) {
        let guideViews = document.getElementById('guideViews').innerHTML;
        let guideView = document.getElementById('guideView');
        guides.forEach(function (guide) {
            if (guide.id == guideId) {
                noneOrBlock('GuideRecord', 'guideView');
                guideView.innerHTML = ejs.render(guideViews, {
                    data: guide,
                    name: Stuname,
                    title: Stutitle,
                    id: id,
                    isQuery: query
                });
            }
        })
    }

    //返回审核材料页面
    function returnStudent(report) {
        noneOrBlock(report, 'student');
        queryMaterial();
    }

    //查看指导学生毕业设计（论文）
    let designs;
    let designName;
    let designTitle;

    function queryGraduationDesign(id, name, title) {
        designName = name;
        designTitle = title;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showStuGraduationProject";
        let GraduationDesigns = document.getElementById('GraduationDesigns').innerHTML;
        let GraduationDesign = document.getElementById('GraduationDesign');
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    designs = responseStr.data;
                    noneOrBlock('student', 'GraduationDesign');
                    GraduationDesign.innerHTML = ejs.render(GraduationDesigns, {
                        data: responseStr.data,
                        name: name,
                        title: title,
                        id: id
                    });
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else if (responseStr.statusCode == "101") {
                    alert("该学生尚未提交材料，暂不能审核！");
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //查看具体的毕业设计（论文）
    function queryGraduationView(id, GraduationId, query) {
        let graduationViews = document.getElementById('graduationViews').innerHTML;
        let graduationView = document.getElementById('graduationView');
        designs.forEach(function (design) {
            if (design.id == GraduationId) {
                noneOrBlock('GraduationDesign', 'graduationView');
                graduationView.innerHTML = ejs.render(graduationViews, {
                    data: design,
                    name: designName,
                    title: designTitle,
                    id: id,
                    query: query
                });
            }
        })
    }

    //审核过程文档
    function auditProcessDocument(id, doc, docNone, annotation, suggest, status) {
        let annotationReport = document.getElementById(annotation).value;
        let suggestReport = document.getElementById(suggest).value;
        let statusReport = document.getElementById(status).value;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/verifyDocument";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                docType: doc,
                annotation: annotationReport,
                status: statusReport,
                suggest: suggestReport
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                queryMaterial();
                noneOrBlock(docNone, 'student');
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //审核开题报告
    function reviewReport(id, doc) {
        auditProcessDocument(id, doc, 'openingReport', 'annotationReport', 'suggestReport', 'statusReport');
    }

    //审核中期检查
    function reviewIntermediate(id, doc) {
        auditProcessDocument(id, doc, 'Intermediate', 'annotationIntermediate', 'suggestIntermediate', 'statusIntermediate');
    }

    //审核外文译文和原文
    function reviewForeignTranslation(id, doc) {
        auditProcessDocument(id, doc, 'ForeignTranslation', 'annotationForeignTranslation', 'suggestForeignTranslation', 'statusForeignTranslation');
    }

    //审核文献综述
    function reviewLiteratureReview(id, doc) {
        auditProcessDocument(id, doc, 'LiteratureReview', 'annotationLiteratureReview', 'suggestLiteratureReview', 'statusLiteratureReview');
    }

    //审核指导记录
    function auditGuidanceRecords(id, docId) {
        let annotationGuideView = document.getElementById('annotationGuideView').value;
        let suggestGuideView = document.getElementById('suggestGuideView').value;
        let statusGuideView = document.getElementById('statusGuideView').value;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/verifyGuidanceRecord";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                docId: docId,
                annotation: annotationGuideView,
                status: statusGuideView,
                suggest: suggestGuideView
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                queryGuideRecord(id, Stuname, Stutitle);
                noneOrBlock('guideView', 'GuideRecord');
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //审核毕业设计论文
    function auditGraduationDesign(id, docId) {
        let annotationGraduation = document.getElementById('annotationGraduation').value;
        let suggestGraduation = document.getElementById('suggestGraduation').value;
        let statusGraduation = document.getElementById('statusGraduation').value;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/verifyGraduationProject";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                docId: docId,
                annotation: annotationGraduation,
                status: statusGraduation,
                suggest: suggestGraduation
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                queryGraduationDesign(id, designName, designTitle)
                noneOrBlock('graduationView', 'GraduationDesign')
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //毕业设计指导教师评审
    function graduationDesignReview(id) {
        let investigationDemonstration = document.getElementById('investigationDemonstration').value;
        let technicalRoute = document.getElementById('technicalRoute').value;
        let analyzeSolve = document.getElementById('analyzeSolve').value;
        let workAttitude = document.getElementById('workAttitude').value;
        let designSpecification = document.getElementById('designSpecification').value;
        let designInnovation = document.getElementById('designInnovation').value;
        let agreeReply = document.getElementById('agreeReply').value;
        let paperComment = document.getElementById('paperComment').value;
        let url = "http://www.yuanbw.cn:20086/gpms/tea/markingGtDoc";
        $.ajax({
            url: url,
            type: "POST",
            data: {
                sid: id,
                scoreInvestigation: investigationDemonstration,
                scoreTechnology: technicalRoute,
                scoreAnalysis: analyzeSolve,
                scoreWorkload: workAttitude,
                scoreInstruction: designSpecification,
                scoreInnovate: designInnovation,
                attendDefence: agreeReply,
                comment: paperComment
            },
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                alert(responseStr.msg);
                grade_Papers();
                $('#tutor_scorePlea').removeClass('displayBlock');
                $('#tutor_scorePlea').addClass('displayNone');
                $('#student').addClass('displayBlock');
                $('#student').removeClass('displayNone');

            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    //成绩公示
    function PerformancePublicInfo(id, name) {
        let data = {};
        if (id != "") {
            data.id = id;
        }
        if (name != "") {
            data.name = name;
        }
        let url = "http://www.yuanbw.cn:20086/gpms/tea/showGtStuTotalScoreList";
        let scoresRankings = document.getElementById('scoresRankings').innerHTML;
        let scoresRanking = document.getElementById('scoresRanking');
        $.ajax({
            url: url,
            type: "POST",
            data: data,
            xhrFields: {
                withCredentials: true
            },
            crossDomain: true,
            headers: {
                Token: token
            },
            success: function (responseStr) {
                if (responseStr.msg == "查询成功") {
                    scoresRanking.innerHTML = ejs.render(scoresRankings, {
                        data: responseStr.data
                    });
                } else if (responseStr.statusCode == "102") {
                    alert(responseStr.msg);
                    window.location.href = "../login/login.html";
                } else {
                    scoresRanking.innerHTML = ejs.render(scoresRankings, {
                        data: ""
                    });
                }
            },
            error: function (responseStr) {
                window.location.href = "../404/404.html";
            }
        });
    }

    function PerformancePublic() {
        PerformancePublicInfo("", "");
    }

    //成绩排名条件查询
    function resultsRankQuery() {
        let stuNames = document.getElementById('stuName')
        let stuId = document.getElementById('StuId');
        let stuNameValue = stuNames.value;
        let stuIdValue = stuId.value;
        PerformancePublicInfo(stuIdValue, stuNameValue);
        stuNames.value = "";
        stuId.value = "";
    }

    //发送通知
    function sendNotification() {
        let ids = [];
        $("input[name='checkboxs']:checked").each(function (i) {
            let val = $(this).val();
            val = parseInt(val);
            ids.push(val)
        });
        if(ids.length==0){
            alert("请选择用户！");
        } else{
            let noticeContent = document.getElementById('noticeContent').value;
            let url = "http://www.yuanbw.cn:20086/gpms/rol/sendRoleNotification";
            $.ajax({
                url: url,
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    content:noticeContent,
                    recvIds:ids
                }),
                xhrFields: {
                    withCredentials: true
                },
                crossDomain: true,
                headers: {
                    Token: token
                },
                success: function (responseStr) {
                    alert(responseStr.msg);
                },
                error: function (responseStr) {
                    window.location.href = "../404/404.html";
                }
            });
            document.getElementById('noticeContent').value = "";
            $("input:checkbox").removeAttr("checked");
            console.log(ids)
        }
    }

    //取消发送通知
    function cancelNotification() {
        document.getElementById('noticeContent').value = "";
        $("input:checkbox").removeAttr("checked");
    }

</script>

<script>

    function gobackThree(gobackClass) {
        $('#' + gobackClass).removeClass('displayBlock');
        $('#' + gobackClass).addClass('displayNone');
        $('#three').addClass('displayBlock');
        $('#three').removeClass('displayNone');
    }

    function noneOrBlock(none, show) {
        $('#' + none).removeClass('displayBlock');
        $('#' + none).addClass('displayNone');
        $('#' + show).addClass('displayBlock');
        $('#' + show).removeClass('displayNone');
    }

    //答辩打分报告过程input输入框值限定
    function reportingProcessScore(reportingProcess, score) {
        ScoreTop(reportingProcess, score)
    }

    //答辩打分报告内容input输入框值限定
    function reportingContentScore(reportingContent, score) {
        ScoreTop(reportingContent, score)
    }

    //答辩打分实用价值input输入框值限定
    function applicableValueScore(applicableValue, score) {
        ScoreTop(applicableValue, score)
    }

    //答辩打分答辩input输入框值限定
    function pleaScore(plea, score) {
        ScoreTop(plea, score)
    }

    //毕业设计评审翻译资料、综述材料input输入框值限定
    function reviewTranslationScore(reviewTranslation, score) {
        ScoreTop(reviewTranslation, score)
    }

    //毕业设计评审设计质量及设计说明书质量input输入框值限定
    function designQualityScore(designQuality, score) {
        ScoreTop(designQuality, score)
    }

    //毕业设计评审创新input输入框值限定
    function innovationScore(innovation, score) {
        ScoreTop(innovation, score)
    }

    //毕业设计评审工作量、难度input输入框值限定
    function designQualityScore(workloadDifficulty, score) {
        ScoreTop(workloadDifficulty, score)
    }

    //毕业设计指导教师评审调查、论证input输入框值限定
    function investigationDemonstrationScore(investigationDemonstration, score) {
        ScoreTop(investigationDemonstration, score)
    }

    //毕业设计指导教师评审方案设计与技术路线input输入框值限定
    function technicalRouteScore(technicalRoute, score) {
        ScoreTop(technicalRoute, score)
    }

    //毕业设计指导教师评审分析与解决问题的能力input输入框值限定
    function analyzeSolveScore(analyzeSolve, score) {
        ScoreTop(analyzeSolve, score)
    }

    //毕业设计指导教师评审工作量、工作态度input输入框值限定
    function workAttitudeScore(workAttitude, score) {
        ScoreTop(workAttitude, score)
    }

    //毕业设计指导教师评审设计质量及设计说明书质量input输入框值限定
    function designSpecificationScore(designSpecification, score) {
        ScoreTop(designSpecification, score)
    }

    //毕业设计指导教师评审创新input输入框值限定
    function designInnovationScore(designInnovation, score) {
        ScoreTop(designInnovation, score)
    }

    function ScoreTop(idIput, top) {
        let text = document.getElementById(idIput);
        if (text.value > top) {
            text.value = top;
        } else if (text.value < 0) {
            text.value = 0;
        } else if (isNaN(text.value)) {
            text.value = "";
        }
    }


</script>


</body>
</html>
